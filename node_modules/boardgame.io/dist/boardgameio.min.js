!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).BoardgameIO={})}(this,(function(e){"use strict";let t=(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t};function n(){}const r=e=>e;function a(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function i(){return Object.create(null)}function s(e){e.forEach(o)}function l(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e,...t){if(null==e)return n;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function d(e,t,n){e.$$.on_destroy.push(u(t,n))}function f(e,t,n,r){return e[1]&&r?a(n.ctx.slice(),e[1](r(t))):n.ctx}function p(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function v(e){return null==e?"":e}const g="undefined"!=typeof window;let h=g?()=>window.performance.now():()=>Date.now(),m=g?e=>requestAnimationFrame(e):n;const y=new Set;function b(e){y.forEach(t=>{t.c(e)||(y.delete(t),t.f())}),0!==y.size&&m(b)}function $(e){let t;return 0===y.size&&m(b),{promise:new Promise(n=>{y.add(t={c:e,f:n})}),abort(){y.delete(t)}}}function x(e,t){e.appendChild(t)}function P(e,t,n){const r=w(e);if(!r.getElementById(t)){const e=I("style");e.id=t,e.textContent=n,k(r,e)}}function w(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t.host?t:document}function k(e,t){x(e.head||e,t)}function E(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode.removeChild(e)}function _(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function I(e){return document.createElement(e)}function A(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function S(e){return document.createTextNode(e)}function M(){return S(" ")}function D(){return S("")}function j(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function T(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function G(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function q(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function V(e,t,n){e.classList[n?"add":"remove"](t)}function R(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}const B=new Set;let U,F=0;function L(e,t,n,r,a,o,i,s=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*o(e);c+=100*e+`%{${i(r,1-r)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,f=w(e);B.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=function(e){const t=I("style");return k(w(e),t),t}(e).sheet),v=f.__svelte_rules||(f.__svelte_rules={});v[d]||(v[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?g+", ":""}${d} ${r}ms linear ${a}ms 1 both`,F+=1,d}function J(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),a=n.length-r.length;a&&(e.style.animation=r.join(", "),F-=a,F||m(()=>{F||(B.forEach(e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}}),B.clear())}))}function K(e){U=e}function H(){if(!U)throw new Error("Function called outside component initialization");return U}function W(e){H().$$.on_destroy.push(e)}function Z(){const e=H();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const a=R(t,n);r.slice().forEach(t=>{t.call(e,a)})}}}function Y(e,t){H().$$.context.set(e,t)}function X(e){return H().$$.context.get(e)}function Q(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e.call(this,t))}const ee=[],te=[],ne=[],re=[],ae=Promise.resolve();let oe=!1;function ie(e){ne.push(e)}let se=!1;const le=new Set;function ce(){if(!se){se=!0;do{for(let e=0;e<ee.length;e+=1){const t=ee[e];K(t),ue(t.$$)}for(K(null),ee.length=0;te.length;)te.pop()();for(let e=0;e<ne.length;e+=1){const t=ne[e];le.has(t)||(le.add(t),t())}ne.length=0}while(ee.length);for(;re.length;)re.pop()();oe=!1,se=!1,le.clear()}}function ue(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}let de;function fe(){return de||(de=Promise.resolve(),de.then(()=>{de=null})),de}function pe(e,t,n){e.dispatchEvent(R(`${t?"intro":"outro"}${n}`))}const ve=new Set;let ge;function he(){ge={r:0,c:[],p:ge}}function me(){ge.r||s(ge.c),ge=ge.p}function ye(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function be(e,t,n,r){if(e&&e.o){if(ve.has(e))return;ve.add(e),ge.c.push(()=>{ve.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const $e={duration:0};function xe(e,t,a){let o,i,s=t(e,a),c=!1,u=0;function d(){o&&J(e,o)}function f(){const{delay:t=0,duration:a=300,easing:l=r,tick:f=n,css:p}=s||$e;p&&(o=L(e,0,1,a,t,l,p,u++)),f(0,1);const v=h()+t,g=v+a;i&&i.abort(),c=!0,ie(()=>pe(e,!0,"start")),i=$(t=>{if(c){if(t>=g)return f(1,0),pe(e,!0,"end"),d(),c=!1;if(t>=v){const e=l((t-v)/a);f(e,1-e)}}return c})}let p=!1;return{start(){p||(p=!0,J(e),l(s)?(s=s(),fe().then(f)):f())},invalidate(){p=!1},end(){c&&(d(),c=!1)}}}function Pe(e,t,a){let o,i=t(e,a),c=!0;const u=ge;function d(){const{delay:t=0,duration:a=300,easing:l=r,tick:d=n,css:f}=i||$e;f&&(o=L(e,1,0,a,t,l,f));const p=h()+t,v=p+a;ie(()=>pe(e,!1,"start")),$(t=>{if(c){if(t>=v)return d(0,1),pe(e,!1,"end"),--u.r||s(u.c),!1;if(t>=p){const e=l((t-p)/a);d(1-e,e)}}return c})}return u.r+=1,l(i)?fe().then(()=>{i=i(),d()}):d(),{end(t){t&&i.tick&&i.tick(1,0),c&&(o&&J(e,o),c=!1)}}}function we(e,t,a,o){let i=t(e,a),c=o?0:1,u=null,d=null,f=null;function p(){f&&J(e,f)}function v(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(t){const{delay:a=0,duration:o=300,easing:l=r,tick:g=n,css:m}=i||$e,y={start:h()+a,b:t};t||(y.group=ge,ge.r+=1),u||d?d=y:(m&&(p(),f=L(e,c,t,o,a,l,m)),t&&g(0,1),u=v(y,o),ie(()=>pe(e,t,"start")),$(t=>{if(d&&t>d.start&&(u=v(d,o),d=null,pe(e,u.b,"start"),m&&(p(),f=L(e,c,u.b,u.duration,0,l,i.css))),u)if(t>=u.end)g(c=u.b,1-c),pe(e,u.b,"end"),d||(u.b?p():--u.group.r||s(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*l(e/u.duration),g(c,1-c)}return!(!u&&!d)}))}return{run(e){l(i)?fe().then(()=>{i=i(),g(e)}):g(e)},end(){p(),u=d=null}}}function ke(e,t){const n={},r={},a={$$scope:1};let o=e.length;for(;o--;){const i=e[o],s=t[o];if(s){for(const e in i)e in s||(r[e]=1);for(const e in s)a[e]||(n[e]=s[e],a[e]=1);e[o]=s}else for(const e in i)a[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function Ee(e){return"object"==typeof e&&null!==e?e:{}}function Oe(e){e&&e.c()}function _e(e,t,n,r){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),r||ie(()=>{const t=i.map(o).filter(l);c?c.push(...t):s(t),e.$$.on_mount=[]}),u.forEach(ie)}function Ie(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ae(e,t){-1===e.$$.dirty[0]&&(ee.push(e),oe||(oe=!0,ae.then(ce)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Se(e,t,r,a,o,l,c,u=[-1]){const d=U;K(e);const f=e.$$={fragment:null,ctx:null,props:l,update:n,not_equal:o,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:t.context||[]),callbacks:i(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=r?r(e,t.props||{},(t,n,...r)=>{const a=r.length?r[0]:n;return f.ctx&&o(f.ctx[t],f.ctx[t]=a)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](a),p&&Ae(e,t)),n}):[],f.update(),p=!0,s(f.before_update),f.fragment=!!a&&a(f.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);f.fragment&&f.fragment.l(e),e.forEach(O)}else f.fragment&&f.fragment.c();t.intro&&ye(e.$$.fragment),_e(e,t.target,t.anchor,t.customElement),ce()}K(d)}class Me{$destroy(){Ie(this,1),this.$destroy=n}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ce="function"==typeof Symbol&&Symbol.observable||"@@observable",ze=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ge={INIT:"@@redux/INIT"+ze(),REPLACE:"@@redux/REPLACE"+ze(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ze()}};function qe(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ve(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Te(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Te(1));return n(Ve)(e,t)}if("function"!=typeof e)throw new Error(Te(2));var a=e,o=t,i=[],s=i,l=!1;function c(){s===i&&(s=i.slice())}function u(){if(l)throw new Error(Te(3));return o}function d(e){if("function"!=typeof e)throw new Error(Te(4));if(l)throw new Error(Te(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(Te(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),i=null}}}function f(e){if(!qe(e))throw new Error(Te(7));if(void 0===e.type)throw new Error(Te(8));if(l)throw new Error(Te(9));try{l=!0,o=a(o,e)}finally{l=!1}for(var t=i=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error(Te(10));a=e,f({type:Ge.REPLACE})}function v(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Te(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Ce]=function(){return this},e}return f({type:Ge.INIT}),(r={dispatch:f,subscribe:d,getState:u,replaceReducer:p})[Ce]=v,r}function Re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}const Be=(e,t,n,r)=>({type:"MAKE_MOVE",payload:{type:e,args:t,playerID:n,credentials:r}}),Ue=(e,t,n,r)=>({type:"GAME_EVENT",payload:{type:e,args:t,playerID:n,credentials:r}}),Fe=(e,t,n,r)=>({type:"GAME_EVENT",payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Le=e=>({type:"SYNC",state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),Je=(e,t,n,r)=>({type:"PATCH",prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),Ke=(e,t)=>({type:"UPDATE",state:e,deltalog:t,clientOnly:!0}),He=e=>({type:"RESET",state:e,clientOnly:!0}),We=(e,t)=>({type:"UNDO",payload:{type:null,args:null,playerID:e,credentials:t}}),Ze=(e,t)=>({type:"REDO",payload:{type:null,args:null,playerID:e,credentials:t}}),Ye=()=>({type:"STRIP_TRANSIENTS"});var Xe=Object.freeze({__proto__:null,makeMove:Be,gameEvent:Ue,automaticGameEvent:Fe,sync:Le,patch:Je,update:Ke,reset:He,undo:We,redo:Ze,plugin:(e,t,n,r)=>({type:"PLUGIN",payload:{type:e,args:t,playerID:n,credentials:r}}),stripTransients:Ye});function Qe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function et(e){return!!e&&!!e[qt]}function tt(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Vt}(e)||Array.isArray(e)||!!e[Gt]||!!e.constructor[Gt]||it(e)||st(e))}function nt(e,t,n){void 0===n&&(n=!1),0===rt(e)?(n?Object.keys:Rt)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function rt(e){var t=e[qt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:it(e)?2:st(e)?3:0}function at(e,t){return 2===rt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ot(e,t,n){var r=rt(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function it(e){return Nt&&e instanceof Map}function st(e){return Tt&&e instanceof Set}function lt(e){return e.o||e.t}function ct(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Bt(e);delete t[qt];for(var n=Rt(t),r=0;r<n.length;r++){var a=n[r],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function ut(e,t){return void 0===t&&(t=!1),ft(e)||et(e)||!tt(e)||(rt(e)>1&&(e.set=e.add=e.clear=e.delete=dt),Object.freeze(e),t&&nt(e,(function(e,t){return ut(t,!0)}),!0)),e}function dt(){Qe(2)}function ft(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function pt(e){var t=Ut[e];return t||Qe(18,e),t}function vt(){return Dt}function gt(e,t){t&&(pt("Patches"),e.u=[],e.s=[],e.v=t)}function ht(e){mt(e),e.p.forEach(bt),e.p=null}function mt(e){e===Dt&&(Dt=e.l)}function yt(e){return Dt={p:[],l:Dt,h:e,m:!0,_:0}}function bt(e){var t=e[qt];0===t.i||1===t.i?t.j():t.O=!0}function $t(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||pt("ES5").S(t,e,r),r?(n[qt].P&&(ht(t),Qe(4)),tt(e)&&(e=xt(t,e),t.l||wt(t,e)),t.u&&pt("Patches").M(n[qt],e,t.u,t.s)):e=xt(t,n,[]),ht(t),t.u&&t.v(t.u,t.s),e!==zt?e:void 0}function xt(e,t,n){if(ft(t))return t;var r=t[qt];if(!r)return nt(t,(function(a,o){return Pt(e,r,t,a,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return wt(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=ct(r.k):r.o;nt(3===r.i?new Set(a):a,(function(t,o){return Pt(e,r,a,t,o,n)})),wt(e,a,!1),n&&e.u&&pt("Patches").R(r,n,e.u,e.s)}return r.o}function Pt(e,t,n,r,a,o){if(et(a)){var i=xt(e,a,o&&t&&3!==t.i&&!at(t.D,r)?o.concat(r):void 0);if(ot(n,r,i),!et(i))return;e.m=!1}if(tt(a)&&!ft(a)){if(!e.h.F&&e._<1)return;xt(e,a),t&&t.A.l||wt(e,a)}}function wt(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&ut(t,n)}function kt(e,t){var n=e[qt];return(n?lt(n):e)[t]}function Et(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ot(e){e.P||(e.P=!0,e.l&&Ot(e.l))}function _t(e){e.o||(e.o=ct(e.t))}function It(e,t,n){var r=it(t)?pt("MapSet").N(t,n):st(t)?pt("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:vt(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=r,o=Ft;n&&(a=[r],o=Lt);var i=Proxy.revocable(a,o),s=i.revoke,l=i.proxy;return r.k=l,r.j=s,l}(t,n):pt("ES5").J(t,n);return(n?n.A:vt()).p.push(r),r}function At(e){return et(e)||Qe(22,e),function e(t){if(!tt(t))return t;var n,r=t[qt],a=rt(t);if(r){if(!r.P&&(r.i<4||!pt("ES5").K(r)))return r.t;r.I=!0,n=St(t,a),r.I=!1}else n=St(t,a);return nt(n,(function(t,a){r&&function(e,t){return 2===rt(e)?e.get(t):e[t]}(r.t,t)===a||ot(n,t,e(a))})),3===a?new Set(n):n}(e)}function St(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ct(e)}var Mt,Dt,jt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Nt="undefined"!=typeof Map,Tt="undefined"!=typeof Set,Ct="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,zt=jt?Symbol.for("immer-nothing"):((Mt={})["immer-nothing"]=!0,Mt),Gt=jt?Symbol.for("immer-draftable"):"__$immer_draftable",qt=jt?Symbol.for("immer-state"):"__$immer_state",Vt=""+Object.prototype.constructor,Rt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Bt=Object.getOwnPropertyDescriptors||function(e){var t={};return Rt(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Ut={},Ft={get:function(e,t){if(t===qt)return e;var n=lt(e);if(!at(n,t))return function(e,t,n){var r,a=Et(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!tt(r)?r:r===kt(e.t,t)?(_t(e),e.o[t]=It(e.A.h,r,e)):r},has:function(e,t){return t in lt(e)},ownKeys:function(e){return Reflect.ownKeys(lt(e))},set:function(e,t,n){var r=Et(lt(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var a=kt(lt(e),t),o=null==a?void 0:a[qt];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,a)&&(void 0!==n||at(e.t,t)))return!0;_t(e),Ot(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==kt(e.t,t)||t in e.t?(e.D[t]=!1,_t(e),Ot(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=lt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Qe(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Qe(12)}},Lt={};nt(Ft,(function(e,t){Lt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Lt.deleteProperty=function(e,t){return Ft.deleteProperty.call(this,e[0],t)},Lt.set=function(e,t,n){return Ft.set.call(this,e[0],t,n,e[0])};var Jt=new(function(){function e(e){var t=this;this.g=Ct,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var i;if("function"!=typeof n&&Qe(6),void 0!==r&&"function"!=typeof r&&Qe(7),tt(e)){var s=yt(t),l=It(t,e,void 0),c=!0;try{i=n(l),c=!1}finally{c?ht(s):mt(s)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return gt(s,r),$t(e,s)}),(function(e){throw ht(s),e})):(gt(s,r),$t(i,s))}if(!e||"object"!=typeof e){if((i=n(e))===zt)return;return void 0===i&&(i=e),t.F&&ut(i,!0),i}Qe(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(a))}))}:[t.produce(e,n,(function(e,t){r=e,a=t})),r,a];var r,a},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){tt(e)||Qe(8),et(e)&&(e=At(e));var t=yt(this),n=It(this,e,void 0);return n[qt].C=!0,mt(t),n},t.finishDraft=function(e,t){var n=(e&&e[qt]).A;return gt(n,t),$t(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Ct&&Qe(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var a=pt("Patches").$;return et(e)?a(e,t):this.produce(e,(function(e){return a(e,t.slice(n+1))}))},e}()),Kt=Jt.produce;Jt.produceWithPatches.bind(Jt),Jt.setAutoFreeze.bind(Jt),Jt.setUseProxies.bind(Jt),Jt.applyPatches.bind(Jt),Jt.createDraft.bind(Jt),Jt.finishDraft.bind(Jt);const Ht={name:"plugin-immer",fnWrap:e=>(t,n,...r)=>{let a=!1;const o=Kt(t,t=>{const o=e(t,n,...r);if("INVALID_MOVE"!==o)return o;a=!0});return a?"INVALID_MOVE":o}};class Wt{constructor(e){const t=function(){let e=4022871197;return function(t){const n=t.toString();for(let t=0;t<n.length;t++){e+=n.charCodeAt(t);let r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)}}();this.c=1,this.s0=t(" "),this.s1=t(" "),this.s2=t(" "),this.s0-=t(e),this.s0<0&&(this.s0+=1),this.s1-=t(e),this.s1<0&&(this.s1+=1),this.s2-=t(e),this.s2<0&&(this.s2+=1)}next(){const e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=Math.trunc(e))}}function Zt(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Yt(e,t){const n=new Wt(e),r=n.next.bind(n);return t&&Zt(t,n),r.state=()=>Zt(n,{}),r}class Xt{constructor(e){this.state=e||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const e=this.state,t=Yt(e.prngstate?"":e.seed,e.prngstate),n=t();return this.state={...e,prngstate:t.state()},n}api(){const e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={};for(const r in t){const a=t[r];n[r]=t=>void 0===t?Math.floor(e()*a)+1:Array.from({length:t}).map(()=>Math.floor(e()*a)+1)}return{...n,Die:function(t=6,n){return void 0===n?Math.floor(e()*t)+1:Array.from({length:n}).map(()=>Math.floor(e()*t)+1)},Number:()=>e(),Shuffle:t=>{const n=[...t];let r=t.length,a=0;const o=Array.from({length:r});for(;r;){const t=Math.trunc(r*e());o[a++]=n[t],n[t]=n[--r]}return o},_private:this}}}const Qt={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new Xt(e).api(),setup:({game:e})=>{let{seed:t}=e;return void 0===t&&(t=Xt.seed()),{seed:t}},playerView:()=>{}};var en,tn;!function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"}(en||(en={})),function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks — the turn is already ending.",e.MaxTurnEndings="Maximum number of turn endings exceeded for this update.\nThis likely means game code is triggering an infinite loop.",e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phase’s `onEnd` hook — the phase is already ending.\nIf you’re trying to dynamically choose the next phase when a phase ends, use the phase’s `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phase’s `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."}(tn||(tn={}));class nn{constructor(e,t,n){this.flow=e,this.playerID=n,this.dispatch=[],this.initialTurn=t.turn,this.updateTurnContext(t,void 0),this.maxEndedTurnsPerAction=100*t.numPlayers}api(){const e={_private:this};for(const t of this.flow.eventNames)e[t]=(...e)=>{this.dispatch.push({type:t,args:e,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return e}isUsed(){return this.dispatch.length>0}updateTurnContext(e,t){this.currentPhase=e.phase,this.currentTurn=e.turn,this.currentMethod=t}unsetCurrentMethod(){this.currentMethod=void 0}update(e){const t=e,n=({stack:e},n)=>({...t,plugins:{...t.plugins,events:{...t.plugins.events,data:{error:n+"\n"+e}}}});e:for(let t=0;t<this.dispatch.length;t++){const r=this.dispatch[t],a=r.turn!==e.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return n(r.error,tn.MaxTurnEndings);if(void 0===r.calledFrom)return n(r.error,tn.CalledOutsideHook);if(e.ctx.gameover)break e;switch(r.type){case"endStage":case"setStage":case"setActivePlayers":switch(r.calledFrom){case en.TURN_ON_END:case en.PHASE_ON_END:return n(r.error,tn.StageEventInOnEnd);case en.PHASE_ON_BEGIN:return n(r.error,tn.StageEventInPhaseBegin);case en.TURN_ON_BEGIN:if("setActivePlayers"===r.type)break;return n(r.error,tn.StageEventInTurnBegin)}if(a)continue e;break;case"endTurn":if(r.calledFrom===en.TURN_ON_END||r.calledFrom===en.PHASE_ON_END)return n(r.error,tn.EndTurnInOnEnd);if(a)continue e;break;case"endPhase":case"setPhase":if(r.calledFrom===en.PHASE_ON_END)return n(r.error,tn.PhaseEventInOnEnd);if(r.phase!==e.ctx.phase)continue e}const o=Fe(r.type,r.args,this.playerID);e=this.flow.processEvent(e,o)}return e}}const rn={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,r,...a)=>{const o=r.events;return o&&o._private.updateTurnContext(r,t),n=e(n,r,...a),o&&o._private.unsetCurrentMethod(),n},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new nn(e.flow,t,n).api()};var an,on,sn=Function.prototype,ln=Object.prototype,cn=sn.toString,un=ln.hasOwnProperty,dn=cn.call(Object),fn=ln.toString,pn=(an=Object.getPrototypeOf,on=Object,function(e){return an(on(e))});var vn=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=fn.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=pn(e);if(null===t)return!0;var n=un.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&cn.call(n)==dn};function gn(e){((...e)=>{console.log(...e)})("INFO: "+e)}function hn(e){((...e)=>{console.error(...e)})("ERROR:",e)}const mn=[Ht,Qt,{name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},{name:"plugin-serializable",fnWrap:e=>(t,n,...r)=>{const a=e(t,n,...r);if(!function e(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t)return!0;if(!vn(t)&&!Array.isArray(t))return!1;for(const n in t)if(!e(t[n]))return!1;return!0}(a))throw new Error("Move state is not JSON-serialiazable.\nSee https://boardgame.io/documentation/#/?id=state for more information.");return a}}],yn=[...mn,rn],bn=e=>{const t={...e.ctx},n=e.plugins||{};return Object.entries(n).forEach(([e,{api:n}])=>{t[e]=n}),t},$n=(e,t,n)=>[...mn,...n,rn].filter(e=>void 0!==e.fnWrap).reduce((e,{fnWrap:n})=>n(e,t),e),xn=(e,t)=>([...yn,...t.game.plugins].filter(e=>void 0!==e.api).forEach(n=>{const r=n.name,a=e.plugins[r]||{data:{}},o=n.api({G:e.G,ctx:e.ctx,data:a.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...a,api:o}}}}),e),Pn=(e,t)=>{const n=((e,t)=>([...mn,...t.game.plugins,rn].reverse().forEach(n=>{const r=n.name,a=e.plugins[r]||{data:{}};if(n.flush){const r=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:a.api,data:a.data});e={...e,plugins:{...e.plugins,[n.name]:{data:r}}}}else if(n.dangerouslyFlushRawState){const o=(e=n.dangerouslyFlushRawState({state:e,game:t.game,api:a.api,data:a.data})).plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:o}}}}}),e))(e,t),r=((e,t)=>[...yn,...t.game.plugins].filter(e=>void 0!==e.isInvalid).map(n=>{const{name:r}=n,a=e.plugins[r],o=n.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:a&&a.data});return!!o&&{plugin:r,message:o}}).find(e=>e)||!1)(n,t);if(!r)return[n];const{plugin:a,message:o}=r;return hn(`${a} plugin declared action invalid:\n${o}`),[e,r]},wn=({G:e,ctx:t,plugins:n={}},{game:r,playerID:a})=>([...yn,...r.plugins].forEach(({name:o,playerView:i})=>{if(!i)return;const{data:s}=n[o]||{data:{}},l=i({G:e,ctx:t,game:r,data:s,playerID:a});n={...n,[o]:{data:l}}}),n);function kn(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function En(e,t){let n={},r=[],a=null,o={},i={};if(Array.isArray(t)){const e={};t.forEach(t=>e[t]=An.NULL),n=e}else{if(kn(t),t.next&&(a=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),void 0!==t.currentPlayer&&On(n,o,i,e.currentPlayer,t.currentPlayer),void 0!==t.others)for(let r=0;r<e.playOrder.length;r++){const a=e.playOrder[r];a!==e.currentPlayer&&On(n,o,i,a,t.others)}if(void 0!==t.all)for(let r=0;r<e.playOrder.length;r++){On(n,o,i,e.playOrder[r],t.all)}if(t.value)for(const e in t.value)On(n,o,i,e,t.value[e]);if(t.minMoves)for(const e in n)void 0===o[e]&&(o[e]=t.minMoves);if(t.maxMoves)for(const e in n)void 0===i[e]&&(i[e]=t.maxMoves)}0===Object.keys(n).length&&(n=null),0===Object.keys(o).length&&(o=null),0===Object.keys(i).length&&(i=null);const s={};for(const e in n)s[e]=0;return{...e,activePlayers:n,_activePlayersMinMoves:o,_activePlayersMaxMoves:i,_activePlayersNumMoves:s,_prevActivePlayers:r,_nextActivePlayers:a}}function On(e,t,n,r,a){"object"==typeof a&&a!==An.NULL||(a={stage:a}),void 0!==a.stage&&(kn(a),e[r]=a.stage,a.minMoves&&(t[r]=a.minMoves),a.maxMoves&&(n[r]=a.maxMoves))}function _n(e,t){return e[t]+""}const In={first:(e,t)=>0===t.turn?t.playOrderPos:(t.playOrderPos+1)%t.playOrder.length,next:(e,t)=>(t.playOrderPos+1)%t.playOrder.length},An={NULL:null};function Sn({moves:e,phases:t,endIf:n,onEnd:r,turn:a,events:o,plugins:i}){void 0===e&&(e={}),void 0===o&&(o={}),void 0===i&&(i=[]),void 0===t&&(t={}),n||(n=()=>{}),r||(r=e=>e),a||(a={});const s={...t};""in s&&hn("cannot specify phase with empty name"),s[""]={};const l={},c=new Set;let u=null;Object.keys(e).forEach(e=>c.add(e));const d=(e,t)=>{const n=$n(e,t,i);return e=>{const t=bn(e);return n(e.G,t)}},f=e=>t=>{const n=bn(t);return e(t.G,n)},p={onEnd:d(r,en.GAME_ON_END),endIf:f(n)};for(const e in s){const t=s[e];if(!0===t.start&&(u=e),void 0!==t.moves)for(const n of Object.keys(t.moves))l[e+"."+n]=t.moves[n],c.add(n);void 0===t.endIf&&(t.endIf=()=>{}),void 0===t.onBegin&&(t.onBegin=e=>e),void 0===t.onEnd&&(t.onEnd=e=>e),void 0===t.turn&&(t.turn=a),void 0===t.turn.order&&(t.turn.order=In),void 0===t.turn.onBegin&&(t.turn.onBegin=e=>e),void 0===t.turn.onEnd&&(t.turn.onEnd=e=>e),void 0===t.turn.endIf&&(t.turn.endIf=()=>!1),void 0===t.turn.onMove&&(t.turn.onMove=e=>e),void 0===t.turn.stages&&(t.turn.stages={}),kn(t.turn,!0);for(const n in t.turn.stages){const r=t.turn.stages[n].moves||{};for(const t of Object.keys(r)){l[e+"."+n+"."+t]=r[t],c.add(t)}}if(t.wrapped={onBegin:d(t.onBegin,en.PHASE_ON_BEGIN),onEnd:d(t.onEnd,en.PHASE_ON_END),endIf:f(t.endIf)},t.turn.wrapped={onMove:d(t.turn.onMove,en.TURN_ON_MOVE),onBegin:d(t.turn.onBegin,en.TURN_ON_BEGIN),onEnd:d(t.turn.onEnd,en.TURN_ON_END),endIf:f(t.turn.endIf)},"function"!=typeof t.next){const{next:e}=t;t.next=()=>e||null}t.wrapped.next=f(t.next)}function v(e){return e.phase?s[e.phase]:s[""]}function g(e){return e}function h(e,t){const n=new Set,r=new Set;for(let a=0;a<t.length;a++){const{fn:o,arg:i,...s}=t[a];if(o===I){r.clear();const t=e.ctx.phase;if(n.has(t)){const t={...e.ctx,phase:null};return{...e,ctx:t}}n.add(t)}const l=[];if(e=o(e,{...s,arg:i,next:l}),o===_)break;const c=k(e);if(c){t.push({fn:_,arg:c,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}const u=E(e);if(u)t.push({fn:I,arg:u,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});else{if([g,P,w].includes(o)){const n=O(e);if(n){t.push({fn:A,arg:n,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}}t.push(...l)}}return e}function m(e,{next:t}){return t.push({fn:y}),e}function y(e,{next:t}){let{G:n,ctx:r}=e;return n=v(r).wrapped.onBegin(e),t.push({fn:b}),{...e,G:n,ctx:r}}function b(e,{currentPlayer:t}){let{ctx:n}=e;const r=v(n);t?(n={...n,currentPlayer:t},r.turn.activePlayers&&(n=En(n,r.turn.activePlayers))):n=function(e,t){let{G:n,ctx:r}=e;const{numPlayers:a}=r,o=bn(e),i=t.order;let s=[...Array.from({length:a})].map((e,t)=>t+"");void 0!==i.playOrder&&(s=i.playOrder(n,o));const l=i.first(n,o),c=typeof l;"number"!==c&&hn(`invalid value returned by turn.order.first — expected number got ${c} “${l}”.`);const u=_n(s,l);return r={...r,currentPlayer:u,playOrderPos:l,playOrder:s},r=En(r,t.activePlayers||{}),r}(e,r.turn);const a=n.turn+1;n={...n,turn:a,numMoves:0,_prevActivePlayers:[]};const o=r.turn.wrapped.onBegin({...e,ctx:n});return{...e,G:o,ctx:n,_undo:[],_redo:[]}}function $(e,{arg:t,next:n,phase:r}){const a=v({phase:r});let{ctx:o}=e;if(t&&t.next){if(!(t.next in s))return hn("invalid phase: "+t.next),e;o={...o,phase:t.next}}else o={...o,phase:a.wrapped.next(e)||null};return e={...e,ctx:o},n.push({fn:y}),e}function x(e,{arg:t,currentPlayer:n,next:r}){let{G:a,ctx:o}=e;const i=v(o),{endPhase:s,ctx:l}=function(e,t,n,r){const a=n.order;let{G:o,ctx:i}=e,s=i.playOrderPos,l=!1;if(r&&!0!==r)"object"!=typeof r&&hn("invalid argument to endTurn: "+r),Object.keys(r).forEach(e=>{switch(e){case"remove":t=_n(i.playOrder,s);break;case"next":s=i.playOrder.indexOf(r.next),t=r.next;break;default:hn("invalid argument to endTurn: "+e)}});else{const n=bn(e),r=a.next(o,n),c=typeof r;void 0!==r&&"number"!==c&&hn(`invalid value returned by turn.order.next — expected number or undefined got ${c} “${r}”.`),void 0===r?l=!0:(s=r,t=_n(i.playOrder,s))}return i={...i,playOrderPos:s,currentPlayer:t},{endPhase:l,ctx:i}}(e,n,i.turn,t);return o=l,e={...e,G:a,ctx:o},s?r.push({fn:I,turn:o.turn,phase:o.phase}):r.push({fn:b,currentPlayer:o.currentPlayer}),e}function P(e,{arg:t,playerID:n}){if("string"!=typeof t&&t!==An.NULL||(t={stage:t}),"object"!=typeof t)return e;kn(t);let{ctx:r}=e,{activePlayers:a,_activePlayersMinMoves:o,_activePlayersMaxMoves:i,_activePlayersNumMoves:s}=r;return void 0!==t.stage&&(null===a&&(a={}),a[n]=t.stage,s[n]=0,t.minMoves&&(null===o&&(o={}),o[n]=t.minMoves),t.maxMoves&&(null===i&&(i={}),i[n]=t.maxMoves)),r={...r,activePlayers:a,_activePlayersMinMoves:o,_activePlayersMaxMoves:i,_activePlayersNumMoves:s},{...e,ctx:r}}function w(e,{arg:t}){return{...e,ctx:En(e.ctx,t)}}function k(e){return p.endIf(e)}function E(e){return v(e.ctx).wrapped.endIf(e)}function O(e){const t=v(e.ctx),n=e.ctx.numMoves||0;return!!(t.turn.maxMoves&&n>=t.turn.maxMoves)||t.turn.wrapped.endIf(e)}function _(e,{arg:t,phase:n}){e=I(e,{phase:n}),void 0===t&&(t=!0),e={...e,ctx:{...e.ctx,gameover:t}};const r=p.onEnd(e);return{...e,G:r}}function I(e,{arg:t,next:n,turn:r,automatic:a}){e=A(e,{turn:r,force:!0,automatic:!0});const{phase:o,turn:i}=e.ctx;if(n&&n.push({fn:$,arg:t,phase:o}),null===o)return e;const s=v(e.ctx).wrapped.onEnd(e),l={...e.ctx,phase:null},c=Ue("endPhase",t),{_stateID:u}=e,d={action:c,_stateID:u,turn:i,phase:o};a&&(d.automatic=!0);const f=[...e.deltalog||[],d];return{...e,G:s,ctx:l,deltalog:f}}function A(e,{arg:t,next:n,turn:r,force:a,automatic:o,playerID:i}){if(r!==e.ctx.turn)return e;const{currentPlayer:s,numMoves:l,phase:c,turn:u}=e.ctx,d=v(e.ctx),f=l||0;if(!a&&d.turn.minMoves&&f<d.turn.minMoves)return gn(`cannot end turn before making ${d.turn.minMoves} moves`),e;const p=d.turn.wrapped.onEnd(e);n&&n.push({fn:x,arg:t,currentPlayer:s});let g={...e.ctx,activePlayers:null};if(t&&t.remove){i=i||s;const t=g.playOrder.filter(e=>e!=i),r=g.playOrderPos>t.length-1?0:g.playOrderPos;if(g={...g,playOrder:t,playOrderPos:r},0===t.length)return n.push({fn:I,turn:u,phase:c}),e}const h=Ue("endTurn",t),{_stateID:m}=e,y={action:h,_stateID:m,turn:u,phase:c};o&&(y.automatic=!0);const b=[...e.deltalog||[],y];return{...e,G:p,ctx:g,deltalog:b,_undo:[],_redo:[]}}function S(e,{arg:t,next:n,automatic:r,playerID:a}){a=a||e.ctx.currentPlayer;let{ctx:o,_stateID:i}=e,{activePlayers:s,_activePlayersNumMoves:l,_activePlayersMinMoves:c,_activePlayersMaxMoves:u,phase:d,turn:f}=o;const p=null!==s&&a in s,g=v(o);if(!t&&p){const e=g.turn.stages[s[a]];e&&e.next&&(t=e.next)}if(n&&n.push({fn:P,arg:t,playerID:a}),!p)return e;const h=l[a]||0;if(c&&c[a]&&h<c[a])return gn(`cannot end stage before making ${c[a]} moves`),e;s={...s},delete s[a],c&&(c={...c},delete c[a]),u&&(u={...u},delete u[a]),o=function(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:a,_prevActivePlayers:o,_nextActivePlayers:i}=e;if(t&&0===Object.keys(t).length)if(i)e=En(e,i),({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:a,_prevActivePlayers:o}=e);else if(o.length>0){const e=o.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:a}=o[e]),o=o.slice(0,e)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:a,_prevActivePlayers:o}}({...o,activePlayers:s,_activePlayersMinMoves:c,_activePlayersMaxMoves:u});const m={action:Ue("endStage",t),_stateID:i,turn:f,phase:d};r&&(m.automatic=!0);const y=[...e.deltalog||[],m];return{...e,ctx:o,deltalog:y}}function M(t,n,r){const a=v(t),o=a.turn.stages,{activePlayers:i}=t;if(i&&void 0!==i[r]&&i[r]!==An.NULL&&void 0!==o[i[r]]&&void 0!==o[i[r]].moves){const e=o[i[r]].moves;if(n in e)return e[n]}else if(a.moves){if(n in a.moves)return a.moves[n]}else if(n in e)return e[n];return null}const D={endStage:function(e,t){return h(e,[{fn:S,playerID:t}])},setStage:function(e,t,n){return h(e,[{fn:S,arg:n,playerID:t}])},endTurn:function(e,t,n){return h(e,[{fn:A,turn:e.ctx.turn,phase:e.ctx.phase,arg:n}])},pass:function(e,t,n){return h(e,[{fn:A,turn:e.ctx.turn,phase:e.ctx.phase,force:!0,arg:n}])},endPhase:function(e){return h(e,[{fn:I,phase:e.ctx.phase,turn:e.ctx.turn}])},setPhase:function(e,t,n){return h(e,[{fn:I,phase:e.ctx.phase,turn:e.ctx.turn,arg:{next:n}}])},endGame:function(e,t,n){return h(e,[{fn:_,turn:e.ctx.turn,phase:e.ctx.phase,arg:n}])},setActivePlayers:function(e,t,n){return h(e,[{fn:w,arg:n}])}},j=[];return!1!==o.endTurn&&j.push("endTurn"),!1!==o.pass&&j.push("pass"),!1!==o.endPhase&&j.push("endPhase"),!1!==o.setPhase&&j.push("setPhase"),!1!==o.endGame&&j.push("endGame"),!1!==o.setActivePlayers&&j.push("setActivePlayers"),!1!==o.endStage&&j.push("endStage"),!1!==o.setStage&&j.push("setStage"),{ctx:e=>({numPlayers:e,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:e})].map((e,t)=>t+""),playOrderPos:0,phase:u,activePlayers:null}),init:e=>h(e,[{fn:m}]),isPlayerActive:function(e,t,n){return t.activePlayers?n in t.activePlayers:t.currentPlayer===n},eventHandlers:D,eventNames:Object.keys(D),enabledEventNames:j,moveMap:l,moveNames:[...c.values()],processMove:function(e,t){const{playerID:n,type:r}=t,{currentPlayer:a,activePlayers:o,_activePlayersMaxMoves:i}=e.ctx,s=M(e.ctx,r,n),l=!s||"function"==typeof s||!0!==s.noLimit;let{numMoves:c,_activePlayersNumMoves:u}=e.ctx;l&&(n===a&&c++,o&&u[n]++),e={...e,ctx:{...e.ctx,numMoves:c,_activePlayersNumMoves:u}},i&&u[n]>=i[n]&&(e=S(e,{playerID:n,automatic:!0}));const d=v(e.ctx).turn.wrapped.onMove({...e,ctx:{...e.ctx,playerID:n}});return h(e={...e,G:d},[{fn:g}])},processEvent:function(e,t){const{type:n,playerID:r,args:a}=t.payload;return"function"!=typeof D[n]?e:D[n](e,r,...Array.isArray(a)?a:[a])},getMove:M}}function Mn(e){if(function(e){return void 0!==e.processMove}(e))return e;if(void 0===e.name&&(e.name="default"),void 0===e.deltaState&&(e.deltaState=!1),void 0===e.disableUndo&&(e.disableUndo=!1),void 0===e.setup&&(e.setup=()=>({})),void 0===e.moves&&(e.moves={}),void 0===e.playerView&&(e.playerView=e=>e),void 0===e.plugins&&(e.plugins=[]),e.plugins.forEach(e=>{if(void 0===e.name)throw new Error("Plugin missing name attribute");if(e.name.includes(" "))throw new Error(e.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Sn(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(e=>e.name),processMove:(n,r)=>{let a=t.getMove(n.ctx,r.type,r.playerID);var o;if((o=a)instanceof Object&&void 0!==o.move&&(a=a.move),a instanceof Function){const t=$n(a,en.MOVE,e.plugins),o={...bn(n),playerID:r.playerID};let i=[];return void 0!==r.args&&(i=Array.isArray(r.args)?r.args:[r.args]),t(n.G,o,...i)}return hn("invalid move object: "+r.type),n.G}}}var Dn,jn;!function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"}(Dn||(Dn={})),function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"}(jn||(jn={}));var Nn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Tn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Cn(e,t){return e(t={exports:{}},t.exports),t.exports}var zn=Cn((function(e,t){function n(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function r(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=void 0;var a=function(){function e(e){void 0===e&&(e=[""]),this.tokens=e}return e.fromJSON=function(t){var r=t.split("/").map(n);if(""!==r[0])throw new Error("Invalid JSON Pointer: "+t);return new e(r)},e.prototype.toString=function(){return this.tokens.map(r).join("/")},e.prototype.evaluate=function(e){for(var t=null,n="",r=e,a=1,o=this.tokens.length;a<o;a++)t=r,"__proto__"!=(n=this.tokens[a])&&"constructor"!=n&&"prototype"!=n&&(r=(t||{})[n]);return{parent:t,key:n,value:r}},e.prototype.get=function(e){return this.evaluate(e).value},e.prototype.set=function(e,t){for(var n=e,r=1,a=this.tokens.length-1,o=this.tokens[r];r<a;r++)n=(n||{})[o];n&&(n[this.tokens[this.tokens.length-1]]=t)},e.prototype.push=function(e){this.tokens.push(e)},e.prototype.add=function(t){return new e(this.tokens.concat(String(t)))},e}();t.Pointer=a}));Tn(zn);zn.Pointer;var Gn=Cn((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.objectType=t.hasOwnProperty=void 0,t.hasOwnProperty=Object.prototype.hasOwnProperty,t.objectType=function(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e},t.clone=function e(n){if(null==(r=n)||"object"!=typeof r)return n;var r;if(n.constructor==Array){for(var a=n.length,o=new Array(a),i=0;i<a;i++)o[i]=e(n[i]);return o}if(n.constructor==Date)return new Date(+n);var s={};for(var l in n)t.hasOwnProperty.call(n,l)&&(s[l]=e(n[l]));return s}}));Tn(Gn);Gn.clone,Gn.objectType;var qn=Cn((function(e,t){function n(e,t){var n={};for(var r in e)Gn.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(n[r]=1);for(var a in t)Gn.hasOwnProperty.call(t,a)&&void 0!==t[a]&&delete n[a];return Object.keys(n)}function r(e){for(var t=e.length,n={},r=0;r<t;r++){var a=e[r];for(var o in a)Gn.hasOwnProperty.call(a,o)&&void 0!==a[o]&&(n[o]=(n[o]||0)+1)}for(var o in n)n[o]<t&&delete n[o];return Object.keys(n)}function a(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function o(e,t,n,r){void 0===r&&(r=s);var o={"0,0":{operations:[],cost:0}};var i=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length;return function n(i,s){var l=i+","+s,c=o[l];if(void 0===c){if(i>0&&s>0&&!r(e[i-1],t[s-1],new zn.Pointer).length)c=n(i-1,s-1);else{var u=[];if(i>0){var d=n(i-1,s),f={op:"remove",index:i-1};u.push(a(d,f))}if(s>0){var p=n(i,s-1),v={op:"add",index:i-1,value:t[s-1]};u.push(a(p,v))}if(i>0&&s>0){var g=n(i-1,s-1),h={op:"replace",index:i-1,original:e[i-1],value:t[s-1]};u.push(a(g,h))}c=u.sort((function(e,t){return e.cost-t.cost}))[0]}o[l]=c}return c}(i,l).operations.reduce((function(e,t){var a=e[0],o=e[1];if(function(e){return"add"===e.op}(t)){var s=t.index+1+o,l=s<i+o?String(s):"-",c={op:t.op,path:n.add(l).toString(),value:t.value};return[a.concat(c),o+1]}if(function(e){return"remove"===e.op}(t)){c={op:t.op,path:n.add(String(t.index+o)).toString()};return[a.concat(c),o-1]}var u=n.add(String(t.index+o)),d=r(t.original,t.value,u);return[a.concat.apply(a,d),o]}),[[],0])[0]}function i(e,t,a,o){void 0===o&&(o=s);var i=[];return n(e,t).forEach((function(e){i.push({op:"remove",path:a.add(e).toString()})})),n(t,e).forEach((function(e){i.push({op:"add",path:a.add(e).toString(),value:t[e]})})),r([e,t]).forEach((function(n){i.push.apply(i,o(e[n],t[n],a.add(n)))})),i}function s(e,t,n,r){if(void 0===r&&(r=s),e===t)return[];var a=Gn.objectType(e),l=Gn.objectType(t);return"array"==a&&"array"==l?o(e,t,n,r):"object"==a&&"object"==l?i(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Object.defineProperty(t,"__esModule",{value:!0}),t.diffAny=t.diffObjects=t.diffArrays=t.intersection=t.subtract=t.isDestructive=void 0,t.isDestructive=function(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t},t.subtract=n,t.intersection=r,t.diffArrays=o,t.diffObjects=i,t.diffAny=s}));Tn(qn);qn.diffAny,qn.diffObjects,qn.diffArrays,qn.intersection,qn.subtract,qn.isDestructive;var Vn=Cn((function(e,t){var n,r=Nn&&Nn.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.InvalidOperationError=t.test=t.copy=t.move=t.replace=t.remove=t.add=t.TestError=t.MissingError=void 0;var a=function(e){function t(t){var n=e.call(this,"Value required at path: "+t)||this;return n.path=t,n.name="MissingError",n}return r(t,e),t}(Error);t.MissingError=a;var o=function(e){function t(t,n){var r=e.call(this,"Test failed: "+t+" != "+n)||this;return r.actual=t,r.expected=n,r.name="TestError",r}return r(t,e),t}(Error);function i(e,t,n){if(Array.isArray(e))if("-"==t)e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function s(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function l(e,t){var n=zn.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new a(t.path):(i(n.parent,n.key,Gn.clone(t.value)),null)}function c(e,t){var n=zn.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.value?new a(t.path):(s(n.parent,n.key),null)}function u(e,t){var n=zn.Pointer.fromJSON(t.path).evaluate(e);if(null===n.parent)return new a(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new a(t.path)}else if(void 0===n.value)return new a(t.path);return n.parent[n.key]=t.value,null}function d(e,t){var n=zn.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new a(t.from);var r=zn.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new a(t.path):(s(n.parent,n.key),i(r.parent,r.key,n.value),null)}function f(e,t){var n=zn.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new a(t.from);var r=zn.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new a(t.path):(i(r.parent,r.key,Gn.clone(n.value)),null)}function p(e,t){var n=zn.Pointer.fromJSON(t.path).evaluate(e);return qn.diffAny(n.value,t.value,new zn.Pointer).length?new o(n.value,t.value):null}t.TestError=o,t.add=l,t.remove=c,t.replace=u,t.move=d,t.copy=f,t.test=p;var v=function(e){function t(t){var n=e.call(this,"Invalid operation: "+t.op)||this;return n.operation=t,n.name="InvalidOperationError",n}return r(t,e),t}(Error);t.InvalidOperationError=v,t.apply=function(e,t){switch(t.op){case"add":return l(e,t);case"remove":return c(e,t);case"replace":return u(e,t);case"move":return d(e,t);case"copy":return f(e,t);case"test":return p(e,t)}return new v(t)}}));Tn(Vn);Vn.apply,Vn.InvalidOperationError,Vn.test,Vn.copy,Vn.move,Vn.replace,Vn.remove,Vn.add,Vn.TestError,Vn.MissingError;var Rn=Cn((function(e,t){function n(e,t){var n=zn.Pointer.fromJSON(t).evaluate(e);if(void 0!==n)return{op:"test",path:t,value:n.value}}Object.defineProperty(t,"__esModule",{value:!0}),t.createTests=t.createPatch=t.applyPatch=void 0,t.applyPatch=function(e,t){return t.map((function(t){return Vn.apply(e,t)}))},t.createPatch=function(e,t,n){var r=new zn.Pointer;return(n?function(e){return function t(n,r,a){var o=e(n,r,a);return Array.isArray(o)?o:qn.diffAny(n,r,a,t)}}(n):qn.diffAny)(e,t,r)},t.createTests=function(e,t){var r=new Array;return t.filter(qn.isDestructive).forEach((function(t){var a=n(e,t.path);if(a&&r.push(a),"from"in t){var o=n(e,t.from);o&&r.push(o)}})),r}}));Tn(Rn);Rn.createTests,Rn.createPatch;var Bn=Rn.applyPatch;const Un=e=>null!==e.payload.playerID&&void 0!==e.payload.playerID;function Fn(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return"MAKE_MOVE"===t.action.type&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function Ln(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},a=e.plugins.log.data.metadata;return void 0!==a&&(r.metadata=a),"object"==typeof n&&!0===n.redact&&(r.redact=!0),{...e,deltalog:[r]}}function Jn(e,t,n){const[r,a]=Pn(e,n);return a?[r,Hn(t,jn.PluginActionInvalid,a)]:[r]}function Kn(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function Hn(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const Wn=e=>t=>n=>{const r=t(n);switch(n.type){case"STRIP_TRANSIENTS":return r;default:{const[,t]=Kn(e.getState());return void 0!==t?(e.dispatch({type:"STRIP_TRANSIENTS"}),{...r,transients:t}):r}}};function Zn({game:e,isClient:t}){return e=Mn(e),(n=null,r)=>{let[a]=Kn(n);switch(r.type){case"STRIP_TRANSIENTS":return a;case"GAME_EVENT":{if(a={...a,deltalog:[]},t)return a;if(void 0!==a.ctx.gameover)return hn("cannot call event after game end"),Hn(a,jn.GameOver);if(Un(r)&&!e.flow.isPlayerActive(a.G,a.ctx,r.payload.playerID))return hn("disallowed event: "+r.payload.type),Hn(a,jn.InactivePlayer);a=xn(a,{game:e,isClient:!1,playerID:r.payload.playerID});let n,o=e.flow.processEvent(a,r);return[o,n]=Jn(o,a,{game:e,isClient:!1}),n?n:(o=Fn(o,{game:e,action:r}),{...o,_stateID:a._stateID+1})}case"MAKE_MOVE":{const n=a={...a,deltalog:[]},o=e.flow.getMove(a.ctx,r.payload.type,r.payload.playerID||a.ctx.currentPlayer);if(null===o)return hn("disallowed move: "+r.payload.type),Hn(a,jn.UnavailableMove);if(t&&!1===o.client)return a;if(void 0!==a.ctx.gameover)return hn("cannot make move after game end"),Hn(a,jn.GameOver);if(Un(r)&&!e.flow.isPlayerActive(a.G,a.ctx,r.payload.playerID))return hn("disallowed move: "+r.payload.type),Hn(a,jn.InactivePlayer);a=xn(a,{game:e,isClient:t,playerID:r.payload.playerID});const i=e.processMove(a,r.payload);if("INVALID_MOVE"===i)return hn(`invalid move: ${r.payload.type} args: ${r.payload.args}`),Hn(a,jn.InvalidMove);const s={...a,G:i};if(t&&((e,t)=>[...yn,...t.game.plugins].filter(e=>void 0!==e.noClient).map(n=>{const r=n.name,a=e.plugins[r];return!!a&&n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:a.api,data:a.data})}).includes(!0))(s,{game:e}))return a;if(a=s,t){let t;return[a,t]=Jn(a,n,{game:e,isClient:!0}),t||{...a,_stateID:a._stateID+1}}let l;return a=Ln(a,r,o),a=e.flow.processMove(a,r.payload),[a,l]=Jn(a,n,{game:e}),l?l:(a=Fn(a,{game:e,action:r}),{...a,_stateID:a._stateID+1})}case"RESET":case"UPDATE":case"SYNC":return r.state;case"UNDO":{if(a={...a,deltalog:[]},e.disableUndo)return hn("Undo is not enabled"),Hn(a,jn.ActionDisabled);const{G:t,ctx:n,_undo:o,_redo:i,_stateID:s}=a;if(o.length<2)return hn("No moves to undo"),Hn(a,jn.ActionInvalid);const l=o[o.length-1],c=o[o.length-2];if(Un(r)&&r.payload.playerID!==l.playerID)return hn("Cannot undo other players' moves"),Hn(a,jn.ActionInvalid);if(l.moveType){if(!((e,t,n)=>!function(e){return void 0!==e.undoable}(n)||(n.undoable instanceof Function?n.undoable(e,t):n.undoable))(t,n,e.flow.getMove(c.ctx,l.moveType,l.playerID)))return hn("Move cannot be undone"),Hn(a,jn.ActionInvalid)}return a=Ln(a,r),{...a,G:c.G,ctx:c.ctx,plugins:c.plugins,_stateID:s+1,_undo:o.slice(0,-1),_redo:[l,...i]}}case"REDO":{if(a={...a,deltalog:[]},e.disableUndo)return hn("Redo is not enabled"),Hn(a,jn.ActionDisabled);const{_undo:t,_redo:n,_stateID:o}=a;if(0===n.length)return hn("No moves to redo"),Hn(a,jn.ActionInvalid);const i=n[0];return Un(r)&&r.payload.playerID!==i.playerID?(hn("Cannot redo other players' moves"),Hn(a,jn.ActionInvalid)):(a=Ln(a,r),{...a,G:i.G,ctx:i.ctx,plugins:i.plugins,_stateID:o+1,_undo:[...t,i],_redo:n.slice(1)})}case"PLUGIN":return((e,t,n)=>(n.game.plugins.filter(e=>void 0!==e.action).filter(e=>e.name===t.payload.type).forEach(n=>{const r=n.name,a=e.plugins[r]||{data:{}},o=n.action(a.data,t.payload);e={...e,plugins:{...e.plugins,[r]:{...a,data:o}}}}),e))(a,r,{game:e});case"PATCH":{const e=a,t=JSON.parse(JSON.stringify(e)),n=Bn(t,r.patch);return n.some(e=>null!==e)?(hn(`Patch ${JSON.stringify(r.patch)} apply failed`),Hn(e,Dn.PatchFailed,n)):t}default:return a}}}function Yn({game:e,numPlayers:t,setupData:n}){t||(t=2);let r={G:{},ctx:(e=Mn(e)).flow.ctx(t),plugins:{}};r=((e,t)=>([...yn,...t.game.plugins].filter(e=>void 0!==e.setup).forEach(n=>{const r=n.name,a=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:a}}}}),e))(r,{game:e}),r=xn(r,{game:e,playerID:void 0});const a=bn(r);r.G=e.setup(a,n);let o={...r,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=Pn(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}class Xn extends class{constructor({transportDataCallback:e,gameName:t,playerID:n,matchID:r,credentials:a,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=e,this.gameName=t||"default",this.playerID=n||null,this.matchID=r||"default",this.credentials=a,this.numPlayers=o||2}subscribeToConnectionStatus(e){this.connectionStatusCallback=e}setConnectionStatus(e){this.isConnected=e,this.connectionStatusCallback()}notifyClient(e){this.transportDataCallback(e)}}{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Qn=e=>new Xn(e),er=[];function tr(e,t=n){let r;const a=new Set;function o(t){if(c(e,t)&&(e=t,r)){const t=!er.length;for(const t of a)t[1](),er.push(t,e);if(t){for(let e=0;e<er.length;e+=2)er[e][0](er[e+1]);er.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,s=n){const l=[i,s];return a.add(l),1===a.size&&(r=t(o)||n),i(e),()=>{a.delete(l),0===a.size&&(r(),r=null)}}}}function nr(e){const t=e-1;return t*t*t+1}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function rr(e,{delay:t=0,duration:n=400,easing:r=nr,x:a=0,y:o=0,opacity:i=0}={}){const s=getComputedStyle(e),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-i);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*a}px, ${(1-e)*o}px);\n\t\t\topacity: ${l-u*t}`}}function ar(e){var{fallback:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["fallback"]);const r=new Map,o=new Map;function i(e,r,o){return(i,s)=>(e.set(s.key,{rect:i.getBoundingClientRect()}),()=>{if(r.has(s.key)){const{rect:e}=r.get(s.key);return r.delete(s.key),function(e,t,r){const{delay:o=0,duration:i=(e=>30*Math.sqrt(e)),easing:s=nr}=a(a({},n),r),c=t.getBoundingClientRect(),u=e.left-c.left,d=e.top-c.top,f=e.width/c.width,p=e.height/c.height,v=Math.sqrt(u*u+d*d),g=getComputedStyle(t),h="none"===g.transform?"":g.transform,m=+g.opacity;return{delay:o,duration:l(i)?i(v):i,easing:s,css:(e,t)=>`\n\t\t\t\topacity: ${e*m};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${h} translate(${t*u}px,${t*d}px) scale(${e+(1-e)*f}, ${e+(1-e)*p});\n\t\t\t`}}(e,i,s)}return e.delete(s.key),t&&t(i,s,o)})}return[i(o,r,!1),i(r,o,!0)]}function or(e){P(e,"svelte-c8tyih","svg.svelte-c8tyih{stroke:currentColor;fill:currentColor;stroke-width:0;width:100%;height:auto;max-height:100%}")}function ir(e){let t,n;return{c(){t=A("title"),n=S(e[0])},m(e,r){E(e,t,r),x(t,n)},p(e,t){1&t&&C(n,e[0])},d(e){e&&O(t)}}}function sr(e){let t,n,r,a=e[0]&&ir(e);const o=e[3].default,i=function(e,t,n,r){if(e){const a=f(e,t,n,r);return e[0](a)}}(o,e,e[2],null);return{c(){t=A("svg"),a&&a.c(),n=D(),i&&i.c(),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"viewBox",e[1]),T(t,"class","svelte-c8tyih")},m(e,o){E(e,t,o),a&&a.m(t,null),x(t,n),i&&i.m(t,null),r=!0},p(e,[s]){e[0]?a?a.p(e,s):(a=ir(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),i&&i.p&&(!r||4&s)&&function(e,t,n,r,a,o){if(a){const i=f(t,n,r,o);e.p(i,a)}}(i,o,e,e[2],r?function(e,t,n,r){if(e[2]&&r){const a=e[2](r(n));if(void 0===t.dirty)return a;if("object"==typeof a){const e=[],n=Math.max(t.dirty.length,a.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|a[r];return e}return t.dirty|a}return t.dirty}(o,e[2],s,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[2]),null),(!r||2&s)&&T(t,"viewBox",e[1])},i(e){r||(ye(i,e),r=!0)},o(e){be(i,e),r=!1},d(e){e&&O(t),a&&a.d(),i&&i.d(e)}}}function lr(e,t,n){let{$$slots:r={},$$scope:a}=t,{title:o=null}=t,{viewBox:i}=t;return e.$$set=e=>{"title"in e&&n(0,o=e.title),"viewBox"in e&&n(1,i=e.viewBox),"$$scope"in e&&n(2,a=e.$$scope)},[o,i,a,r]}class cr extends Me{constructor(e){super(),Se(this,e,lr,sr,c,{title:0,viewBox:1},or)}}function ur(e){let t;return{c(){t=A("path"),T(t,"d","M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function dr(e){let t,n;const r=[{viewBox:"0 0 320 512"},e[0]];let o={$$slots:{default:[ur]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=a(o,r[e]);return t=new cr({props:o}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,[n]){const a=1&n?ke(r,[r[0],Ee(e[0])]):{};2&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function fr(e,t,n){return e.$$set=e=>{n(0,t=a(a({},t),p(e)))},[t=p(t)]}class pr extends Me{constructor(e){super(),Se(this,e,fr,dr,c,{})}}function vr(e){P(e,"svelte-1xg9v5h",".menu.svelte-1xg9v5h{display:flex;margin-top:43px;flex-direction:row-reverse;border:1px solid #ccc;border-radius:5px 5px 0 0;height:25px;line-height:25px;margin-right:-500px;transform-origin:bottom right;transform:rotate(-90deg) translate(0, -500px)}.menu-item.svelte-1xg9v5h{line-height:25px;cursor:pointer;border:0;background:#fefefe;color:#555;padding-left:15px;padding-right:15px;text-align:center}.menu-item.svelte-1xg9v5h:first-child{border-radius:0 5px 0 0}.menu-item.svelte-1xg9v5h:last-child{border-radius:5px 0 0 0}.menu-item.active.svelte-1xg9v5h{cursor:default;font-weight:bold;background:#ddd;color:#555}.menu-item.svelte-1xg9v5h:hover,.menu-item.svelte-1xg9v5h:focus{background:#eee;color:#555}")}function gr(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1].label,r}function hr(e){let t,n,r,a,o,i=e[5]+"";function s(){return e[3](e[4])}return{c(){t=I("button"),n=S(i),r=M(),T(t,"class","menu-item svelte-1xg9v5h"),V(t,"active",e[0]==e[4])},m(e,i){E(e,t,i),x(t,n),x(t,r),a||(o=j(t,"click",s),a=!0)},p(r,a){e=r,2&a&&i!==(i=e[5]+"")&&C(n,i),3&a&&V(t,"active",e[0]==e[4])},d(e){e&&O(t),a=!1,o()}}}function mr(e){let t,r=Object.entries(e[1]),a=[];for(let t=0;t<r.length;t+=1)a[t]=hr(gr(e,r,t));return{c(){t=I("nav");for(let e=0;e<a.length;e+=1)a[e].c();T(t,"class","menu svelte-1xg9v5h")},m(e,n){E(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null)},p(e,[n]){if(7&n){let o;for(r=Object.entries(e[1]),o=0;o<r.length;o+=1){const i=gr(e,r,o);a[o]?a[o].p(i,n):(a[o]=hr(i),a[o].c(),a[o].m(t,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}},i:n,o:n,d(e){e&&O(t),_(a,e)}}}function yr(e,t,n){let{pane:r}=t,{panes:a}=t;const o=Z();return e.$$set=e=>{"pane"in e&&n(0,r=e.pane),"panes"in e&&n(1,a=e.panes)},[r,a,o,e=>o("change",e)]}class br extends Me{constructor(e){super(),Se(this,e,yr,mr,c,{pane:0,panes:1},vr)}}var $r={};function xr(e){P(e,"svelte-1vyml86",".container.svelte-1vyml86{display:inline-block;cursor:pointer;transform:translate(calc(0px - var(--li-identation)), -50%);position:absolute;top:50%;padding-right:100%}.arrow.svelte-1vyml86{transform-origin:25% 50%;position:relative;line-height:1.1em;font-size:0.75em;margin-left:0;transition:150ms;color:var(--arrow-sign);user-select:none;font-family:'Courier New', Courier, monospace}.expanded.svelte-1vyml86{transform:rotateZ(90deg) translateX(-3px)}")}function Pr(e){let t,r,a,o;return{c(){t=I("div"),r=I("div"),r.textContent="▶",T(r,"class","arrow svelte-1vyml86"),V(r,"expanded",e[0]),T(t,"class","container svelte-1vyml86")},m(n,i){E(n,t,i),x(t,r),a||(o=j(t,"click",e[1]),a=!0)},p(e,[t]){1&t&&V(r,"expanded",e[0])},i:n,o:n,d(e){e&&O(t),a=!1,o()}}}function wr(e,t,n){let{expanded:r}=t;return e.$$set=e=>{"expanded"in e&&n(0,r=e.expanded)},[r,function(t){Q.call(this,e,t)}]}class kr extends Me{constructor(e){super(),Se(this,e,wr,Pr,c,{expanded:0},xr)}}function Er(e){P(e,"svelte-1vlbacg","label.svelte-1vlbacg{display:inline-block;color:var(--label-color);padding:0}.spaced.svelte-1vlbacg{padding-right:var(--li-colon-space)}")}function Or(e){let t,n,r,a,o,i;return{c(){t=I("label"),n=I("span"),r=S(e[0]),a=S(e[2]),T(t,"class","svelte-1vlbacg"),V(t,"spaced",e[1])},m(s,l){E(s,t,l),x(t,n),x(n,r),x(n,a),o||(i=j(t,"click",e[5]),o=!0)},p(e,n){1&n&&C(r,e[0]),4&n&&C(a,e[2]),2&n&&V(t,"spaced",e[1])},d(e){e&&O(t),o=!1,i()}}}function _r(e){let t,r=e[3]&&e[0]&&Or(e);return{c(){r&&r.c(),t=D()},m(e,n){r&&r.m(e,n),E(e,t,n)},p(e,[n]){e[3]&&e[0]?r?r.p(e,n):(r=Or(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:n,o:n,d(e){r&&r.d(e),e&&O(t)}}}function Ir(e,t,n){let r,{key:a,isParentExpanded:o,isParentArray:i=!1,colon:s=":"}=t;return e.$$set=e=>{"key"in e&&n(0,a=e.key),"isParentExpanded"in e&&n(1,o=e.isParentExpanded),"isParentArray"in e&&n(4,i=e.isParentArray),"colon"in e&&n(2,s=e.colon)},e.$$.update=()=>{19&e.$$.dirty&&n(3,r=o||!i||a!=+a)},[a,o,s,r,i,function(t){Q.call(this,e,t)}]}class Ar extends Me{constructor(e){super(),Se(this,e,Ir,_r,c,{key:0,isParentExpanded:1,isParentArray:4,colon:2},Er)}}function Sr(e){P(e,"svelte-rwxv37","label.svelte-rwxv37{display:inline-block}.indent.svelte-rwxv37{padding-left:var(--li-identation)}.collapse.svelte-rwxv37{--li-display:inline;display:inline;font-style:italic}.comma.svelte-rwxv37{margin-left:-0.5em;margin-right:0.5em}label.svelte-rwxv37{position:relative}")}function Mr(e,t,n){const r=e.slice();return r[12]=t[n],r[20]=n,r}function Dr(e){let t,n;return t=new kr({props:{expanded:e[0]}}),t.$on("click",e[15]),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.expanded=e[0]),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function jr(e){let t;return{c(){t=I("span"),t.textContent="…"},m(e,n){E(e,t,n)},p:n,i:n,o:n,d(e){e&&O(t)}}}function Nr(e){let t,n,r,a,o,i=e[13],s=[];for(let t=0;t<i.length;t+=1)s[t]=Cr(Mr(e,i,t));const l=e=>be(s[e],1,1,()=>{s[e]=null});let c=e[13].length<e[7].length&&zr();return{c(){t=I("ul");for(let e=0;e<s.length;e+=1)s[e].c();n=M(),c&&c.c(),T(t,"class","svelte-rwxv37"),V(t,"collapse",!e[0])},m(i,l){E(i,t,l);for(let e=0;e<s.length;e+=1)s[e].m(t,null);x(t,n),c&&c.m(t,null),r=!0,a||(o=j(t,"click",e[16]),a=!0)},p(e,r){if(10129&r){let a;for(i=e[13],a=0;a<i.length;a+=1){const o=Mr(e,i,a);s[a]?(s[a].p(o,r),ye(s[a],1)):(s[a]=Cr(o),s[a].c(),ye(s[a],1),s[a].m(t,n))}for(he(),a=i.length;a<s.length;a+=1)l(a);me()}e[13].length<e[7].length?c||(c=zr(),c.c(),c.m(t,null)):c&&(c.d(1),c=null),1&r&&V(t,"collapse",!e[0])},i(e){if(!r){for(let e=0;e<i.length;e+=1)ye(s[e]);r=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)be(s[e]);r=!1},d(e){e&&O(t),_(s,e),c&&c.d(),a=!1,o()}}}function Tr(e){let t;return{c(){t=I("span"),t.textContent=",",T(t,"class","comma svelte-rwxv37")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function Cr(e){let t,n,r,a;t=new Pa({props:{key:e[8](e[12]),isParentExpanded:e[0],isParentArray:e[4],value:e[0]?e[9](e[12]):e[10](e[12])}});let o=!e[0]&&e[20]<e[7].length-1&&Tr();return{c(){Oe(t.$$.fragment),n=M(),o&&o.c(),r=D()},m(e,i){_e(t,e,i),E(e,n,i),o&&o.m(e,i),E(e,r,i),a=!0},p(e,n){const a={};8448&n&&(a.key=e[8](e[12])),1&n&&(a.isParentExpanded=e[0]),16&n&&(a.isParentArray=e[4]),9729&n&&(a.value=e[0]?e[9](e[12]):e[10](e[12])),t.$set(a),!e[0]&&e[20]<e[7].length-1?o||(o=Tr(),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i(e){a||(ye(t.$$.fragment,e),a=!0)},o(e){be(t.$$.fragment,e),a=!1},d(e){Ie(t,e),e&&O(n),o&&o.d(e),e&&O(r)}}}function zr(e){let t;return{c(){t=I("span"),t.textContent="…"},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function Gr(e){let t,n,r,a,o,i,s,l,c,u,d,f,p,v,g,h,m,y,b=e[11]&&e[2]&&Dr(e);a=new Ar({props:{key:e[12],colon:e[14].colon,isParentExpanded:e[2],isParentArray:e[3]}}),a.$on("click",e[15]);const $=[Nr,jr],P=[];function w(e,t){return e[2]?0:1}return d=w(e),f=P[d]=$[d](e),{c(){t=I("li"),n=I("label"),b&&b.c(),r=M(),Oe(a.$$.fragment),o=M(),i=I("span"),s=I("span"),l=S(e[1]),c=S(e[5]),u=M(),f.c(),p=M(),v=I("span"),g=S(e[6]),T(n,"class","svelte-rwxv37"),T(t,"class","svelte-rwxv37"),V(t,"indent",e[2])},m(f,$){E(f,t,$),x(t,n),b&&b.m(n,null),x(n,r),_e(a,n,null),x(n,o),x(n,i),x(i,s),x(s,l),x(i,c),x(t,u),P[d].m(t,null),x(t,p),x(t,v),x(v,g),h=!0,m||(y=j(i,"click",e[15]),m=!0)},p(e,[o]){e[11]&&e[2]?b?(b.p(e,o),2052&o&&ye(b,1)):(b=Dr(e),b.c(),ye(b,1),b.m(n,r)):b&&(he(),be(b,1,1,()=>{b=null}),me());const i={};4096&o&&(i.key=e[12]),4&o&&(i.isParentExpanded=e[2]),8&o&&(i.isParentArray=e[3]),a.$set(i),(!h||2&o)&&C(l,e[1]),(!h||32&o)&&C(c,e[5]);let s=d;d=w(e),d===s?P[d].p(e,o):(he(),be(P[s],1,1,()=>{P[s]=null}),me(),f=P[d],f?f.p(e,o):(f=P[d]=$[d](e),f.c()),ye(f,1),f.m(t,p)),(!h||64&o)&&C(g,e[6]),4&o&&V(t,"indent",e[2])},i(e){h||(ye(b),ye(a.$$.fragment,e),ye(f),h=!0)},o(e){be(b),be(a.$$.fragment,e),be(f),h=!1},d(e){e&&O(t),b&&b.d(),Ie(a),P[d].d(),m=!1,y()}}}function qr(e,t,n){let r,{key:a,keys:o,colon:i=":",label:s="",isParentExpanded:l,isParentArray:c,isArray:u=!1,bracketOpen:d,bracketClose:f}=t,{previewKeys:p=o}=t,{getKey:v=(e=>e)}=t,{getValue:g=(e=>e)}=t,{getPreviewValue:h=g}=t,{expanded:m=!1,expandable:y=!0}=t;const b=X($r);return Y($r,{...b,colon:i}),e.$$set=e=>{"key"in e&&n(12,a=e.key),"keys"in e&&n(17,o=e.keys),"colon"in e&&n(18,i=e.colon),"label"in e&&n(1,s=e.label),"isParentExpanded"in e&&n(2,l=e.isParentExpanded),"isParentArray"in e&&n(3,c=e.isParentArray),"isArray"in e&&n(4,u=e.isArray),"bracketOpen"in e&&n(5,d=e.bracketOpen),"bracketClose"in e&&n(6,f=e.bracketClose),"previewKeys"in e&&n(7,p=e.previewKeys),"getKey"in e&&n(8,v=e.getKey),"getValue"in e&&n(9,g=e.getValue),"getPreviewValue"in e&&n(10,h=e.getPreviewValue),"expanded"in e&&n(0,m=e.expanded),"expandable"in e&&n(11,y=e.expandable)},e.$$.update=()=>{4&e.$$.dirty&&(l||n(0,m=!1)),131201&e.$$.dirty&&n(13,r=m?o:p.slice(0,5))},[m,s,l,c,u,d,f,p,v,g,h,y,a,r,b,function(){n(0,m=!m)},function(){n(0,m=!0)},o,i]}class Vr extends Me{constructor(e){super(),Se(this,e,qr,Gr,c,{key:12,keys:17,colon:18,label:1,isParentExpanded:2,isParentArray:3,isArray:4,bracketOpen:5,bracketClose:6,previewKeys:7,getKey:8,getValue:9,getPreviewValue:10,expanded:0,expandable:11},Sr)}}function Rr(e){let t,n;return t=new Vr({props:{key:e[0],expanded:e[4],isParentExpanded:e[1],isParentArray:e[2],keys:e[5],previewKeys:e[5],getValue:e[6],label:e[3]+" ",bracketOpen:"{",bracketClose:"}"}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.key=e[0]),16&n&&(r.expanded=e[4]),2&n&&(r.isParentExpanded=e[1]),4&n&&(r.isParentArray=e[2]),32&n&&(r.keys=e[5]),32&n&&(r.previewKeys=e[5]),8&n&&(r.label=e[3]+" "),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function Br(e,t,n){let r,{key:a,value:o,isParentExpanded:i,isParentArray:s,nodeType:l}=t,{expanded:c=!0}=t;return e.$$set=e=>{"key"in e&&n(0,a=e.key),"value"in e&&n(7,o=e.value),"isParentExpanded"in e&&n(1,i=e.isParentExpanded),"isParentArray"in e&&n(2,s=e.isParentArray),"nodeType"in e&&n(3,l=e.nodeType),"expanded"in e&&n(4,c=e.expanded)},e.$$.update=()=>{128&e.$$.dirty&&n(5,r=Object.getOwnPropertyNames(o))},[a,i,s,l,c,r,function(e){return o[e]},o]}class Ur extends Me{constructor(e){super(),Se(this,e,Br,Rr,c,{key:0,value:7,isParentExpanded:1,isParentArray:2,nodeType:3,expanded:4})}}function Fr(e){let t,n;return t=new Vr({props:{key:e[0],expanded:e[4],isParentExpanded:e[2],isParentArray:e[3],isArray:!0,keys:e[5],previewKeys:e[6],getValue:e[7],label:"Array("+e[1].length+")",bracketOpen:"[",bracketClose:"]"}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.key=e[0]),16&n&&(r.expanded=e[4]),4&n&&(r.isParentExpanded=e[2]),8&n&&(r.isParentArray=e[3]),32&n&&(r.keys=e[5]),64&n&&(r.previewKeys=e[6]),2&n&&(r.label="Array("+e[1].length+")"),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function Lr(e,t,n){let r,a,{key:o,value:i,isParentExpanded:s,isParentArray:l}=t,{expanded:c=JSON.stringify(i).length<1024}=t;const u=new Set(["length"]);return e.$$set=e=>{"key"in e&&n(0,o=e.key),"value"in e&&n(1,i=e.value),"isParentExpanded"in e&&n(2,s=e.isParentExpanded),"isParentArray"in e&&n(3,l=e.isParentArray),"expanded"in e&&n(4,c=e.expanded)},e.$$.update=()=>{2&e.$$.dirty&&n(5,r=Object.getOwnPropertyNames(i)),32&e.$$.dirty&&n(6,a=r.filter(e=>!u.has(e)))},[o,i,s,l,c,r,a,function(e){return i[e]}]}class Jr extends Me{constructor(e){super(),Se(this,e,Lr,Fr,c,{key:0,value:1,isParentExpanded:2,isParentArray:3,expanded:4})}}function Kr(e){let t,n;return t=new Vr({props:{key:e[0],isParentExpanded:e[1],isParentArray:e[2],keys:e[4],getKey:Hr,getValue:Wr,isArray:!0,label:e[3]+"("+e[4].length+")",bracketOpen:"{",bracketClose:"}"}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.key=e[0]),2&n&&(r.isParentExpanded=e[1]),4&n&&(r.isParentArray=e[2]),16&n&&(r.keys=e[4]),24&n&&(r.label=e[3]+"("+e[4].length+")"),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function Hr(e){return String(e[0])}function Wr(e){return e[1]}function Zr(e,t,n){let{key:r,value:a,isParentExpanded:o,isParentArray:i,nodeType:s}=t,l=[];return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(5,a=e.value),"isParentExpanded"in e&&n(1,o=e.isParentExpanded),"isParentArray"in e&&n(2,i=e.isParentArray),"nodeType"in e&&n(3,s=e.nodeType)},e.$$.update=()=>{if(32&e.$$.dirty){let e=[],t=0;for(const n of a)e.push([t++,n]);n(4,l=e)}},[r,o,i,s,l,a]}class Yr extends Me{constructor(e){super(),Se(this,e,Zr,Kr,c,{key:0,value:5,isParentExpanded:1,isParentArray:2,nodeType:3})}}class Xr{constructor(e,t){this.key=e,this.value=t}}function Qr(e){let t,n;return t=new Vr({props:{key:e[0],isParentExpanded:e[1],isParentArray:e[2],keys:e[4],getKey:ea,getValue:ta,label:e[3]+"("+e[4].length+")",colon:"",bracketOpen:"{",bracketClose:"}"}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.key=e[0]),2&n&&(r.isParentExpanded=e[1]),4&n&&(r.isParentArray=e[2]),16&n&&(r.keys=e[4]),24&n&&(r.label=e[3]+"("+e[4].length+")"),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function ea(e){return e[0]}function ta(e){return e[1]}function na(e,t,n){let{key:r,value:a,isParentExpanded:o,isParentArray:i,nodeType:s}=t,l=[];return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(5,a=e.value),"isParentExpanded"in e&&n(1,o=e.isParentExpanded),"isParentArray"in e&&n(2,i=e.isParentArray),"nodeType"in e&&n(3,s=e.nodeType)},e.$$.update=()=>{if(32&e.$$.dirty){let e=[],t=0;for(const n of a)e.push([t++,new Xr(n[0],n[1])]);n(4,l=e)}},[r,o,i,s,l,a]}class ra extends Me{constructor(e){super(),Se(this,e,na,Qr,c,{key:0,value:5,isParentExpanded:1,isParentArray:2,nodeType:3})}}function aa(e){let t,n;return t=new Vr({props:{expanded:e[4],isParentExpanded:e[2],isParentArray:e[3],key:e[2]?String(e[0]):e[1].key,keys:e[5],getValue:e[6],label:e[2]?"Entry ":"=> ",bracketOpen:"{",bracketClose:"}"}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,[n]){const r={};16&n&&(r.expanded=e[4]),4&n&&(r.isParentExpanded=e[2]),8&n&&(r.isParentArray=e[3]),7&n&&(r.key=e[2]?String(e[0]):e[1].key),4&n&&(r.label=e[2]?"Entry ":"=> "),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function oa(e,t,n){let{key:r,value:a,isParentExpanded:o,isParentArray:i}=t,{expanded:s=!1}=t;return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(1,a=e.value),"isParentExpanded"in e&&n(2,o=e.isParentExpanded),"isParentArray"in e&&n(3,i=e.isParentArray),"expanded"in e&&n(4,s=e.expanded)},[r,a,o,i,s,["key","value"],function(e){return a[e]}]}class ia extends Me{constructor(e){super(),Se(this,e,oa,aa,c,{key:0,value:1,isParentExpanded:2,isParentArray:3,expanded:4})}}function sa(e){P(e,"svelte-3bjyvl","li.svelte-3bjyvl{user-select:text;word-wrap:break-word;word-break:break-all}.indent.svelte-3bjyvl{padding-left:var(--li-identation)}.String.svelte-3bjyvl{color:var(--string-color)}.Date.svelte-3bjyvl{color:var(--date-color)}.Number.svelte-3bjyvl{color:var(--number-color)}.Boolean.svelte-3bjyvl{color:var(--boolean-color)}.Null.svelte-3bjyvl{color:var(--null-color)}.Undefined.svelte-3bjyvl{color:var(--undefined-color)}.Function.svelte-3bjyvl{color:var(--function-color);font-style:italic}.Symbol.svelte-3bjyvl{color:var(--symbol-color)}")}function la(e){let t,n,r,a,o,i,s,l=(e[2]?e[2](e[1]):e[1])+"";return n=new Ar({props:{key:e[0],colon:e[6],isParentExpanded:e[3],isParentArray:e[4]}}),{c(){t=I("li"),Oe(n.$$.fragment),r=M(),a=I("span"),o=S(l),T(a,"class",i=v(e[5])+" svelte-3bjyvl"),T(t,"class","svelte-3bjyvl"),V(t,"indent",e[3])},m(e,i){E(e,t,i),_e(n,t,null),x(t,r),x(t,a),x(a,o),s=!0},p(e,[r]){const c={};1&r&&(c.key=e[0]),8&r&&(c.isParentExpanded=e[3]),16&r&&(c.isParentArray=e[4]),n.$set(c),(!s||6&r)&&l!==(l=(e[2]?e[2](e[1]):e[1])+"")&&C(o,l),(!s||32&r&&i!==(i=v(e[5])+" svelte-3bjyvl"))&&T(a,"class",i),8&r&&V(t,"indent",e[3])},i(e){s||(ye(n.$$.fragment,e),s=!0)},o(e){be(n.$$.fragment,e),s=!1},d(e){e&&O(t),Ie(n)}}}function ca(e,t,n){let{key:r,value:a,valueGetter:o=null,isParentExpanded:i,isParentArray:s,nodeType:l}=t;const{colon:c}=X($r);return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(1,a=e.value),"valueGetter"in e&&n(2,o=e.valueGetter),"isParentExpanded"in e&&n(3,i=e.isParentExpanded),"isParentArray"in e&&n(4,s=e.isParentArray),"nodeType"in e&&n(5,l=e.nodeType)},[r,a,o,i,s,l,c]}class ua extends Me{constructor(e){super(),Se(this,e,ca,la,c,{key:0,value:1,valueGetter:2,isParentExpanded:3,isParentArray:4,nodeType:5},sa)}}function da(e){P(e,"svelte-1ca3gb2","li.svelte-1ca3gb2{user-select:text;word-wrap:break-word;word-break:break-all}.indent.svelte-1ca3gb2{padding-left:var(--li-identation)}.collapse.svelte-1ca3gb2{--li-display:inline;display:inline;font-style:italic}")}function fa(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function pa(e){let t,n;return t=new kr({props:{expanded:e[0]}}),t.$on("click",e[7]),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.expanded=e[0]),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function va(e){let t,n,r=e[0]&&ga(e);return{c(){t=I("ul"),r&&r.c(),T(t,"class","svelte-1ca3gb2"),V(t,"collapse",!e[0])},m(e,a){E(e,t,a),r&&r.m(t,null),n=!0},p(e,n){e[0]?r?(r.p(e,n),1&n&&ye(r,1)):(r=ga(e),r.c(),ye(r,1),r.m(t,null)):r&&(he(),be(r,1,1,()=>{r=null}),me()),1&n&&V(t,"collapse",!e[0])},i(e){n||(ye(r),n=!0)},o(e){be(r),n=!1},d(e){e&&O(t),r&&r.d()}}}function ga(e){let t,n,r,a,o,i,s;t=new Pa({props:{key:"message",value:e[2].message}}),a=new Ar({props:{key:"stack",colon:":",isParentExpanded:e[3]}});let l=e[5],c=[];for(let t=0;t<l.length;t+=1)c[t]=ha(fa(e,l,t));return{c(){Oe(t.$$.fragment),n=M(),r=I("li"),Oe(a.$$.fragment),o=M(),i=I("span");for(let e=0;e<c.length;e+=1)c[e].c();T(r,"class","svelte-1ca3gb2")},m(e,l){_e(t,e,l),E(e,n,l),E(e,r,l),_e(a,r,null),x(r,o),x(r,i);for(let e=0;e<c.length;e+=1)c[e].m(i,null);s=!0},p(e,n){const r={};4&n&&(r.value=e[2].message),t.$set(r);const o={};if(8&n&&(o.isParentExpanded=e[3]),a.$set(o),32&n){let t;for(l=e[5],t=0;t<l.length;t+=1){const r=fa(e,l,t);c[t]?c[t].p(r,n):(c[t]=ha(r),c[t].c(),c[t].m(i,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=l.length}},i(e){s||(ye(t.$$.fragment,e),ye(a.$$.fragment,e),s=!0)},o(e){be(t.$$.fragment,e),be(a.$$.fragment,e),s=!1},d(e){Ie(t,e),e&&O(n),e&&O(r),Ie(a),_(c,e)}}}function ha(e){let t,n,r,a=e[8]+"";return{c(){t=I("span"),n=S(a),r=I("br"),T(t,"class","svelte-1ca3gb2"),V(t,"indent",e[10]>0)},m(e,a){E(e,t,a),x(t,n),E(e,r,a)},p(e,t){32&t&&a!==(a=e[8]+"")&&C(n,a)},d(e){e&&O(t),e&&O(r)}}}function ma(e){let t,n,r,a,o,i,s,l,c,u,d,f=(e[0]?"":e[2].message)+"",p=e[3]&&pa(e);r=new Ar({props:{key:e[1],colon:e[6].colon,isParentExpanded:e[3],isParentArray:e[4]}});let v=e[3]&&va(e);return{c(){t=I("li"),p&&p.c(),n=M(),Oe(r.$$.fragment),a=M(),o=I("span"),i=S("Error: "),s=S(f),l=M(),v&&v.c(),T(t,"class","svelte-1ca3gb2"),V(t,"indent",e[3])},m(f,g){E(f,t,g),p&&p.m(t,null),x(t,n),_e(r,t,null),x(t,a),x(t,o),x(o,i),x(o,s),x(t,l),v&&v.m(t,null),c=!0,u||(d=j(o,"click",e[7]),u=!0)},p(e,[a]){e[3]?p?(p.p(e,a),8&a&&ye(p,1)):(p=pa(e),p.c(),ye(p,1),p.m(t,n)):p&&(he(),be(p,1,1,()=>{p=null}),me());const o={};2&a&&(o.key=e[1]),8&a&&(o.isParentExpanded=e[3]),16&a&&(o.isParentArray=e[4]),r.$set(o),(!c||5&a)&&f!==(f=(e[0]?"":e[2].message)+"")&&C(s,f),e[3]?v?(v.p(e,a),8&a&&ye(v,1)):(v=va(e),v.c(),ye(v,1),v.m(t,null)):v&&(he(),be(v,1,1,()=>{v=null}),me()),8&a&&V(t,"indent",e[3])},i(e){c||(ye(p),ye(r.$$.fragment,e),ye(v),c=!0)},o(e){be(p),be(r.$$.fragment,e),be(v),c=!1},d(e){e&&O(t),p&&p.d(),Ie(r),v&&v.d(),u=!1,d()}}}function ya(e,t,n){let r,{key:a,value:o,isParentExpanded:i,isParentArray:s}=t,{expanded:l=!1}=t;const c=X($r);return Y($r,{...c,colon:":"}),e.$$set=e=>{"key"in e&&n(1,a=e.key),"value"in e&&n(2,o=e.value),"isParentExpanded"in e&&n(3,i=e.isParentExpanded),"isParentArray"in e&&n(4,s=e.isParentArray),"expanded"in e&&n(0,l=e.expanded)},e.$$.update=()=>{4&e.$$.dirty&&n(5,r=o.stack.split("\n")),8&e.$$.dirty&&(i||n(0,l=!1))},[l,a,o,i,s,r,c,function(){n(0,l=!l)}]}class ba extends Me{constructor(e){super(),Se(this,e,ya,ma,c,{key:1,value:2,isParentExpanded:3,isParentArray:4,expanded:0},da)}}function $a(e){let t,n,r;var a=e[6];function o(e){return{props:{key:e[0],value:e[1],isParentExpanded:e[2],isParentArray:e[3],nodeType:e[4],valueGetter:e[5]}}}return a&&(t=new a(o(e))),{c(){t&&Oe(t.$$.fragment),n=D()},m(e,a){t&&_e(t,e,a),E(e,n,a),r=!0},p(e,[r]){const i={};if(1&r&&(i.key=e[0]),2&r&&(i.value=e[1]),4&r&&(i.isParentExpanded=e[2]),8&r&&(i.isParentArray=e[3]),16&r&&(i.nodeType=e[4]),32&r&&(i.valueGetter=e[5]),a!==(a=e[6])){if(t){he();const e=t;be(e.$$.fragment,1,0,()=>{Ie(e,1)}),me()}a?(t=new a(o(e)),Oe(t.$$.fragment),ye(t.$$.fragment,1),_e(t,n.parentNode,n)):t=null}else a&&t.$set(i)},i(e){r||(t&&ye(t.$$.fragment,e),r=!0)},o(e){t&&be(t.$$.fragment,e),r=!1},d(e){e&&O(n),t&&Ie(t,e)}}}function xa(e,t,n){let r,a,o,{key:i,value:s,isParentExpanded:l,isParentArray:c}=t;return e.$$set=e=>{"key"in e&&n(0,i=e.key),"value"in e&&n(1,s=e.value),"isParentExpanded"in e&&n(2,l=e.isParentExpanded),"isParentArray"in e&&n(3,c=e.isParentArray)},e.$$.update=()=>{2&e.$$.dirty&&n(4,r=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t?"function"==typeof e[Symbol.iterator]?"Iterable":e.constructor.name:t}(s)),16&e.$$.dirty&&n(6,a=function(e){switch(e){case"Object":return Ur;case"Error":return ba;case"Array":return Jr;case"Iterable":case"Map":case"Set":return"function"==typeof s.set?ra:Yr;case"MapEntry":return ia;default:return ua}}(r)),16&e.$$.dirty&&n(5,o=function(e){switch(e){case"Object":case"Error":case"Array":case"Iterable":case"Map":case"Set":case"MapEntry":case"Number":return;case"String":return e=>`"${e}"`;case"Boolean":return e=>e?"true":"false";case"Date":return e=>e.toISOString();case"Null":return()=>"null";case"Undefined":return()=>"undefined";case"Function":case"Symbol":return e=>e.toString();default:return()=>`<${e}>`}}(r))},[i,s,l,c,r,o,a]}class Pa extends Me{constructor(e){super(),Se(this,e,xa,$a,c,{key:0,value:1,isParentExpanded:2,isParentArray:3})}}function wa(e){P(e,"svelte-773n60","ul.svelte-773n60{--string-color:var(--json-tree-string-color, #cb3f41);--symbol-color:var(--json-tree-symbol-color, #cb3f41);--boolean-color:var(--json-tree-boolean-color, #112aa7);--function-color:var(--json-tree-function-color, #112aa7);--number-color:var(--json-tree-number-color, #3029cf);--label-color:var(--json-tree-label-color, #871d8f);--arrow-color:var(--json-tree-arrow-color, #727272);--null-color:var(--json-tree-null-color, #8d8d8d);--undefined-color:var(--json-tree-undefined-color, #8d8d8d);--date-color:var(--json-tree-date-color, #8d8d8d);--li-identation:var(--json-tree-li-indentation, 1em);--li-line-height:var(--json-tree-li-line-height, 1.3);--li-colon-space:0.3em;font-size:var(--json-tree-font-size, 12px);font-family:var(--json-tree-font-family, 'Courier New', Courier, monospace)}ul.svelte-773n60 li{line-height:var(--li-line-height);display:var(--li-display, list-item);list-style:none}ul.svelte-773n60,ul.svelte-773n60 ul{padding:0;margin:0}")}function ka(e){let t,n,r;return n=new Pa({props:{key:e[0],value:e[1],isParentExpanded:!0,isParentArray:!1}}),{c(){t=I("ul"),Oe(n.$$.fragment),T(t,"class","svelte-773n60")},m(e,a){E(e,t,a),_e(n,t,null),r=!0},p(e,[t]){const r={};1&t&&(r.key=e[0]),2&t&&(r.value=e[1]),n.$set(r)},i(e){r||(ye(n.$$.fragment,e),r=!0)},o(e){be(n.$$.fragment,e),r=!1},d(e){e&&O(t),Ie(n)}}}function Ea(e,t,n){Y($r,{});let{key:r="",value:a}=t;return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(1,a=e.value)},[r,a]}class Oa extends Me{constructor(e){super(),Se(this,e,Ea,ka,c,{key:0,value:1},wa)}}function _a(e){P(e,"svelte-jvfq3i",".svelte-jvfq3i{box-sizing:border-box}section.switcher.svelte-jvfq3i{position:sticky;bottom:0;transform:translateY(20px);margin:40px -20px 0;border-top:1px solid #999;padding:20px;background:#fff}label.svelte-jvfq3i{display:flex;align-items:baseline;gap:5px;font-weight:bold}select.svelte-jvfq3i{min-width:140px}")}function Ia(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function Aa(e){let t,n,r,a,o,i,l=e[1],c=[];for(let t=0;t<l.length;t+=1)c[t]=Sa(Ia(e,l,t));return{c(){t=I("section"),n=I("label"),r=S("Client\n      \n      "),a=I("select");for(let e=0;e<c.length;e+=1)c[e].c();T(a,"id",Da),T(a,"class","svelte-jvfq3i"),void 0===e[2]&&ie(()=>e[6].call(a)),T(n,"class","svelte-jvfq3i"),T(t,"class","switcher svelte-jvfq3i")},m(s,l){E(s,t,l),x(t,n),x(n,r),x(n,a);for(let e=0;e<c.length;e+=1)c[e].m(a,null);G(a,e[2]),o||(i=[j(a,"change",e[3]),j(a,"change",e[6])],o=!0)},p(e,t){if(2&t){let n;for(l=e[1],n=0;n<l.length;n+=1){const r=Ia(e,l,n);c[n]?c[n].p(r,t):(c[n]=Sa(r),c[n].c(),c[n].m(a,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}4&t&&G(a,e[2])},d(e){e&&O(t),_(c,e),o=!1,s(i)}}}function Sa(e){let t,n,r,a,o,i,s,l,c,u,d=JSON.stringify(e[7].playerID)+"",f=JSON.stringify(e[7].matchID)+"",p=e[7].game.name+"";return{c(){t=I("option"),n=S(e[9]),r=S(" —\n            playerID: "),a=S(d),o=S(",\n            matchID: "),i=S(f),s=S("\n            ("),l=S(p),c=S(")\n          "),t.__value=u=e[9],t.value=t.__value,T(t,"class","svelte-jvfq3i")},m(e,u){E(e,t,u),x(t,n),x(t,r),x(t,a),x(t,o),x(t,i),x(t,s),x(t,l),x(t,c)},p(e,t){2&t&&d!==(d=JSON.stringify(e[7].playerID)+"")&&C(a,d),2&t&&f!==(f=JSON.stringify(e[7].matchID)+"")&&C(i,f),2&t&&p!==(p=e[7].game.name+"")&&C(l,p)},d(e){e&&O(t)}}}function Ma(e){let t,r=e[1].length>1&&Aa(e);return{c(){r&&r.c(),t=D()},m(e,n){r&&r.m(e,n),E(e,t,n)},p(e,[n]){e[1].length>1?r?r.p(e,n):(r=Aa(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:n,o:n,d(e){r&&r.d(e),e&&O(t)}}}const Da="bgio-debug-select-client";function ja(e,t,r){let a,o,i,s,l=n,c=()=>(l(),l=u(d,e=>r(5,s=e)),d);e.$$.on_destroy.push(()=>l());let{clientManager:d}=t;c();return e.$$set=e=>{"clientManager"in e&&c(r(0,d=e.clientManager))},e.$$.update=()=>{32&e.$$.dirty&&r(4,({client:a,debuggableClients:o}=s),a,(r(1,o),r(5,s))),18&e.$$.dirty&&r(2,i=o.indexOf(a))},[d,o,i,e=>{const t=o[e.target.value];d.switchToClient(t);const n=document.getElementById(Da);n&&n.focus()},a,s,function(){i=q(this),r(2,i),r(1,o),r(4,a),r(5,s)}]}class Na extends Me{constructor(e){super(),Se(this,e,ja,Ma,c,{clientManager:0},_a)}}function Ta(e){P(e,"svelte-1vfj1mn",".key.svelte-1vfj1mn.svelte-1vfj1mn{display:flex;flex-direction:row;align-items:center}button.svelte-1vfj1mn.svelte-1vfj1mn{cursor:pointer;min-width:10px;padding-left:5px;padding-right:5px;height:20px;line-height:20px;text-align:center;border:1px solid #ccc;box-shadow:1px 1px 1px #888;background:#eee;color:#444}button.svelte-1vfj1mn.svelte-1vfj1mn:hover{background:#ddd}.key.active.svelte-1vfj1mn button.svelte-1vfj1mn{background:#ddd;border:1px solid #999;box-shadow:none}label.svelte-1vfj1mn.svelte-1vfj1mn{margin-left:10px}")}function Ca(e){let t,n,r,a,o,i=`(shortcut: ${e[0]})`;return{c(){t=I("label"),n=S(e[1]),r=M(),a=I("span"),o=S(i),T(a,"class","screen-reader-only"),T(t,"for",e[5]),T(t,"class","svelte-1vfj1mn")},m(e,i){E(e,t,i),x(t,n),x(t,r),x(t,a),x(a,o)},p(e,t){2&t&&C(n,e[1]),1&t&&i!==(i=`(shortcut: ${e[0]})`)&&C(o,i)},d(e){e&&O(t)}}}function za(e){let t,r,a,o,i,l,c=e[1]&&Ca(e);return{c(){t=I("div"),r=I("button"),a=S(e[0]),o=M(),c&&c.c(),T(r,"id",e[5]),r.disabled=e[2],T(r,"class","svelte-1vfj1mn"),T(t,"class","key svelte-1vfj1mn"),V(t,"active",e[3])},m(n,s){E(n,t,s),x(t,r),x(r,a),x(t,o),c&&c.m(t,null),i||(l=[j(window,"keydown",e[7]),j(r,"click",e[6])],i=!0)},p(e,[n]){1&n&&C(a,e[0]),4&n&&(r.disabled=e[2]),e[1]?c?c.p(e,n):(c=Ca(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null),8&n&&V(t,"active",e[3])},i:n,o:n,d(e){e&&O(t),c&&c.d(),i=!1,s(l)}}}function Ga(e,t,n){let r,{value:a}=t,{onPress:o=null}=t,{label:i=null}=t,{disable:s=!1}=t;const{disableHotkeys:l}=X("hotkeys");d(e,l,e=>n(9,r=e));let c=!1,u="key-"+a;function f(){n(3,c=!1)}function p(){n(3,c=!0),setTimeout(f,200),o&&setTimeout(o,1)}return e.$$set=e=>{"value"in e&&n(0,a=e.value),"onPress"in e&&n(8,o=e.onPress),"label"in e&&n(1,i=e.label),"disable"in e&&n(2,s=e.disable)},[a,i,s,c,l,u,p,function(e){r||s||e.ctrlKey||e.metaKey||e.key!=a||(e.preventDefault(),p())},o]}class qa extends Me{constructor(e){super(),Se(this,e,Ga,za,c,{value:0,onPress:8,label:1,disable:2},Ta)}}function Va(e){P(e,"svelte-1mppqmp",".move.svelte-1mppqmp{display:flex;flex-direction:row;cursor:pointer;margin-left:10px;color:#666}.move.svelte-1mppqmp:hover{color:#333}.move.active.svelte-1mppqmp{color:#111;font-weight:bold}.arg-field.svelte-1mppqmp{outline:none;font-family:monospace}")}function Ra(e){let t,r,a,o,i,c,u,d,f,p,v;return{c(){t=I("div"),r=I("span"),a=S(e[2]),o=M(),i=I("span"),i.textContent="(",c=M(),u=I("span"),d=M(),f=I("span"),f.textContent=")",T(u,"class","arg-field svelte-1mppqmp"),T(u,"contenteditable",""),T(t,"class","move svelte-1mppqmp"),V(t,"active",e[3])},m(n,s){E(n,t,s),x(t,r),x(r,a),x(t,o),x(t,i),x(t,c),x(t,u),e[6](u),x(t,d),x(t,f),p||(v=[j(u,"focus",(function(){l(e[0])&&e[0].apply(this,arguments)})),j(u,"blur",(function(){l(e[1])&&e[1].apply(this,arguments)})),j(u,"keypress",N(Ba)),j(u,"keydown",e[5]),j(t,"click",(function(){l(e[0])&&e[0].apply(this,arguments)}))],p=!0)},p(n,[r]){e=n,4&r&&C(a,e[2]),8&r&&V(t,"active",e[3])},i:n,o:n,d(n){n&&O(t),e[6](null),p=!1,s(v)}}}const Ba=()=>{};function Ua(e,t,n){let r,{Activate:a}=t,{Deactivate:o}=t,{name:i}=t,{active:s}=t;const l=Z();return function(e){H().$$.after_update.push(e)}(()=>{s?r.focus():r.blur()}),e.$$set=e=>{"Activate"in e&&n(0,a=e.Activate),"Deactivate"in e&&n(1,o=e.Deactivate),"name"in e&&n(2,i=e.name),"active"in e&&n(3,s=e.active)},[a,o,i,s,r,function(e){"Enter"==e.key&&(e.preventDefault(),function(){try{const e=r.innerText;let t=new Function(`return [${e}]`)();l("submit",t)}catch(e){l("error",e)}n(4,r.innerText="",r)}()),"Escape"==e.key&&(e.preventDefault(),o())},function(e){te[e?"unshift":"push"](()=>{r=e,n(4,r)})}]}class Fa extends Me{constructor(e){super(),Se(this,e,Ua,Ra,c,{Activate:0,Deactivate:1,name:2,active:3},Va)}}function La(e){P(e,"svelte-smqssc",".move-error.svelte-smqssc{color:#a00;font-weight:bold}.wrapper.svelte-smqssc{display:flex;flex-direction:row;align-items:center}")}function Ja(e){let t,n;return{c(){t=I("span"),n=S(e[2]),T(t,"class","move-error svelte-smqssc")},m(e,r){E(e,t,r),x(t,n)},p(e,t){4&t&&C(n,e[2])},d(e){e&&O(t)}}}function Ka(e){let t,n,r,a,o,i,s;r=new qa({props:{value:e[0],onPress:e[4]}}),o=new Fa({props:{Activate:e[4],Deactivate:e[5],name:e[1],active:e[3]}}),o.$on("submit",e[6]),o.$on("error",e[7]);let l=e[2]&&Ja(e);return{c(){t=I("div"),n=I("div"),Oe(r.$$.fragment),a=M(),Oe(o.$$.fragment),i=M(),l&&l.c(),T(n,"class","wrapper svelte-smqssc")},m(e,c){E(e,t,c),x(t,n),_e(r,n,null),x(n,a),_e(o,n,null),x(t,i),l&&l.m(t,null),s=!0},p(e,[n]){const a={};1&n&&(a.value=e[0]),r.$set(a);const i={};2&n&&(i.name=e[1]),8&n&&(i.active=e[3]),o.$set(i),e[2]?l?l.p(e,n):(l=Ja(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i(e){s||(ye(r.$$.fragment,e),ye(o.$$.fragment,e),s=!0)},o(e){be(r.$$.fragment,e),be(o.$$.fragment,e),s=!1},d(e){e&&O(t),Ie(r),Ie(o),l&&l.d()}}}function Ha(e,t,n){let{shortcut:r}=t,{name:a}=t,{fn:o}=t;const{disableHotkeys:i}=X("hotkeys");let s="",l=!1;function c(){i.set(!1),n(2,s=""),n(3,l=!1)}return e.$$set=e=>{"shortcut"in e&&n(0,r=e.shortcut),"name"in e&&n(1,a=e.name),"fn"in e&&n(8,o=e.fn)},[r,a,s,l,function(){i.set(!0),n(3,l=!0)},c,function(e){n(2,s=""),c(),o.apply(this,e.detail)},function(e){n(2,s=e.detail),hn(e.detail)},o]}class Wa extends Me{constructor(e){super(),Se(this,e,Ha,Ka,c,{shortcut:0,name:1,fn:8},La)}}
/*! (c) 2020 Andrea Giammarchi */const{parse:Za,stringify:Ya}=JSON,{keys:Xa}=Object,Qa=String,eo={},to=(e,t)=>t,no=e=>e instanceof Qa?Qa(e):e,ro=(e,t)=>"string"==typeof t?new Qa(t):t,ao=(e,t,n,r)=>{const a=[];for(let o=Xa(n),{length:i}=o,s=0;s<i;s++){const i=o[s],l=n[i];if(l instanceof Qa){const o=e[l];"object"!=typeof o||t.has(o)?n[i]=r.call(n,i,o):(t.add(o),n[i]=eo,a.push({k:i,a:[e,t,o,r]}))}else n[i]!==eo&&(n[i]=r.call(n,i,l))}for(let{length:e}=a,t=0;t<e;t++){const{k:e,a:o}=a[t];n[e]=r.call(n,e,ao.apply(null,o))}return n},oo=(e,t,n)=>{const r=Qa(t.push(n)-1);return e.set(n,r),r},io=(e,t)=>{const n=Za(e,ro).map(no),r=n[0],a=t||to,o="object"==typeof r&&r?ao(n,new Set,r,a):r;return a.call({"":o},"",o)},so=(e,t,n)=>{const r=t&&"object"==typeof t?(e,n)=>""===e||-1<t.indexOf(e)?n:void 0:t||to,a=new Map,o=[],i=[];let s=+oo(a,o,r.call({"":e},"",e)),l=!s;for(;s<o.length;)l=!0,i[s]=Ya(o[s++],c,n);return"["+i.join(",")+"]";function c(e,t){if(l)return l=!l,t;const n=r.call(this,e,t);switch(typeof n){case"object":if(null===n)return n;case"string":return a.get(n)||oo(a,o,n)}return n}};function lo(e){P(e,"svelte-c3lavh","ul.svelte-c3lavh{padding-left:0}li.svelte-c3lavh{list-style:none;margin:none;margin-bottom:5px}")}function co(e){let t,n,r,a,o,i,s,l,c,u,d,f,p;return r=new qa({props:{value:"1",onPress:e[0].reset,label:"reset"}}),i=new qa({props:{value:"2",onPress:e[2],label:"save"}}),c=new qa({props:{value:"3",onPress:e[3],label:"restore"}}),f=new qa({props:{value:".",onPress:e[1],label:"hide"}}),{c(){t=I("ul"),n=I("li"),Oe(r.$$.fragment),a=M(),o=I("li"),Oe(i.$$.fragment),s=M(),l=I("li"),Oe(c.$$.fragment),u=M(),d=I("li"),Oe(f.$$.fragment),T(n,"class","svelte-c3lavh"),T(o,"class","svelte-c3lavh"),T(l,"class","svelte-c3lavh"),T(d,"class","svelte-c3lavh"),T(t,"id","debug-controls"),T(t,"class","controls svelte-c3lavh")},m(e,v){E(e,t,v),x(t,n),_e(r,n,null),x(t,a),x(t,o),_e(i,o,null),x(t,s),x(t,l),_e(c,l,null),x(t,u),x(t,d),_e(f,d,null),p=!0},p(e,[t]){const n={};1&t&&(n.onPress=e[0].reset),r.$set(n);const a={};2&t&&(a.onPress=e[1]),f.$set(a)},i(e){p||(ye(r.$$.fragment,e),ye(i.$$.fragment,e),ye(c.$$.fragment,e),ye(f.$$.fragment,e),p=!0)},o(e){be(r.$$.fragment,e),be(i.$$.fragment,e),be(c.$$.fragment,e),be(f.$$.fragment,e),p=!1},d(e){e&&O(t),Ie(r),Ie(i),Ie(c),Ie(f)}}}function uo(e,t,n){let{client:r}=t,{ToggleVisibility:a}=t;return e.$$set=e=>{"client"in e&&n(0,r=e.client),"ToggleVisibility"in e&&n(1,a=e.ToggleVisibility)},[r,a,function(){const e=r.getState(),t=so({...e,_undo:[],_redo:[],deltalog:[]});window.localStorage.setItem("gamestate",t),window.localStorage.setItem("initialState",so(r.initialState))},function(){const e=window.localStorage.getItem("gamestate"),t=window.localStorage.getItem("initialState");if(null!==e&&null!==t){const n=io(e),a=io(t);r.store.dispatch(Le({state:n,initialState:a}))}}]}class fo extends Me{constructor(e){super(),Se(this,e,uo,co,c,{client:0,ToggleVisibility:1},lo)}}function po(e){P(e,"svelte-19aan9p",".player-box.svelte-19aan9p{display:flex;flex-direction:row}.player.svelte-19aan9p{cursor:pointer;text-align:center;width:30px;height:30px;line-height:30px;background:#eee;border:3px solid #fefefe;box-sizing:content-box;padding:0}.player.current.svelte-19aan9p{background:#555;color:#eee;font-weight:bold}.player.active.svelte-19aan9p{border:3px solid #ff7f50}")}function vo(e,t,n){const r=e.slice();return r[7]=t[n],r}function go(e){let t,n,r,a,o,i,s=e[7]+"";function l(){return e[5](e[7])}return{c(){t=I("button"),n=S(s),r=M(),T(t,"class","player svelte-19aan9p"),T(t,"aria-label",a=e[4](e[7])),V(t,"current",e[7]==e[0].currentPlayer),V(t,"active",e[7]==e[1])},m(e,a){E(e,t,a),x(t,n),x(t,r),o||(i=j(t,"click",l),o=!0)},p(r,o){e=r,4&o&&s!==(s=e[7]+"")&&C(n,s),4&o&&a!==(a=e[4](e[7]))&&T(t,"aria-label",a),5&o&&V(t,"current",e[7]==e[0].currentPlayer),6&o&&V(t,"active",e[7]==e[1])},d(e){e&&O(t),o=!1,i()}}}function ho(e){let t,r=e[2],a=[];for(let t=0;t<r.length;t+=1)a[t]=go(vo(e,r,t));return{c(){t=I("div");for(let e=0;e<a.length;e+=1)a[e].c();T(t,"class","player-box svelte-19aan9p")},m(e,n){E(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null)},p(e,[n]){if(31&n){let o;for(r=e[2],o=0;o<r.length;o+=1){const i=vo(e,r,o);a[o]?a[o].p(i,n):(a[o]=go(i),a[o].c(),a[o].m(t,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}},i:n,o:n,d(e){e&&O(t),_(a,e)}}}function mo(e,t,n){let{ctx:r}=t,{playerID:a}=t;const o=Z();function i(e){o("change",e==a?{playerID:null}:{playerID:e})}let s;return e.$$set=e=>{"ctx"in e&&n(0,r=e.ctx),"playerID"in e&&n(1,a=e.playerID)},e.$$.update=()=>{1&e.$$.dirty&&n(2,s=r?[...Array(r.numPlayers).keys()].map(e=>e.toString()):[])},[r,a,s,i,function(e){const t=[];e==r.currentPlayer&&t.push("current"),e==a&&t.push("active");let n="Player "+e;return t.length&&(n+=` (${t.join(", ")})`),n},e=>i(e)]}class yo extends Me{constructor(e){super(),Se(this,e,mo,ho,c,{ctx:0,playerID:1},po)}}function bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function xo(e){P(e,"svelte-146sq5f",".tree.svelte-146sq5f{--json-tree-font-family:monospace;--json-tree-font-size:14px;--json-tree-null-color:#757575}.label.svelte-146sq5f{margin-bottom:0;text-transform:none}h3.svelte-146sq5f{text-transform:uppercase}ul.svelte-146sq5f{padding-left:0}li.svelte-146sq5f{list-style:none;margin:0;margin-bottom:5px}")}function Po(e,t,n){const r=e.slice();return r[10]=t[n][0],r[11]=t[n][1],r}function wo(e){let t,n,r,a;return n=new Wa({props:{shortcut:e[8][e[10]],fn:e[11],name:e[10]}}),{c(){t=I("li"),Oe(n.$$.fragment),r=M(),T(t,"class","svelte-146sq5f")},m(e,o){E(e,t,o),_e(n,t,null),x(t,r),a=!0},p(e,t){const r={};16&t&&(r.shortcut=e[8][e[10]]),16&t&&(r.fn=e[11]),16&t&&(r.name=e[10]),n.$set(r)},i(e){a||(ye(n.$$.fragment,e),a=!0)},o(e){be(n.$$.fragment,e),a=!1},d(e){e&&O(t),Ie(n)}}}function ko(e){let t,n,r;return n=new Wa({props:{name:"endStage",shortcut:7,fn:e[5].endStage}}),{c(){t=I("li"),Oe(n.$$.fragment),T(t,"class","svelte-146sq5f")},m(e,a){E(e,t,a),_e(n,t,null),r=!0},p(e,t){const r={};32&t&&(r.fn=e[5].endStage),n.$set(r)},i(e){r||(ye(n.$$.fragment,e),r=!0)},o(e){be(n.$$.fragment,e),r=!1},d(e){e&&O(t),Ie(n)}}}function Eo(e){let t,n,r;return n=new Wa({props:{name:"endTurn",shortcut:8,fn:e[5].endTurn}}),{c(){t=I("li"),Oe(n.$$.fragment),T(t,"class","svelte-146sq5f")},m(e,a){E(e,t,a),_e(n,t,null),r=!0},p(e,t){const r={};32&t&&(r.fn=e[5].endTurn),n.$set(r)},i(e){r||(ye(n.$$.fragment,e),r=!0)},o(e){be(n.$$.fragment,e),r=!1},d(e){e&&O(t),Ie(n)}}}function Oo(e){let t,n,r;return n=new Wa({props:{name:"endPhase",shortcut:9,fn:e[5].endPhase}}),{c(){t=I("li"),Oe(n.$$.fragment),T(t,"class","svelte-146sq5f")},m(e,a){E(e,t,a),_e(n,t,null),r=!0},p(e,t){const r={};32&t&&(r.fn=e[5].endPhase),n.$set(r)},i(e){r||(ye(n.$$.fragment,e),r=!0)},o(e){be(n.$$.fragment,e),r=!1},d(e){e&&O(t),Ie(n)}}}function _o(e){let t,n,r,a,o,i,s,l,c,u,d,f,p,v,g,h,m,y,b,$,P,w,k,A,S,D,j,N,C,z,G,q,V,R;a=new fo({props:{client:e[0],ToggleVisibility:e[2]}}),c=new yo({props:{ctx:e[6],playerID:e[3]}}),c.$on("change",e[9]);let B=Object.entries(e[4]),U=[];for(let t=0;t<B.length;t+=1)U[t]=wo(Po(e,B,t));const F=e=>be(U[e],1,1,()=>{U[e]=null});let L=e[6].activePlayers&&e[5].endStage&&ko(e),J=e[5].endTurn&&Eo(e),K=e[6].phase&&e[5].endPhase&&Oo(e);return D=new Oa({props:{value:e[7]}}),G=new Oa({props:{value:Io(e[6])}}),V=new Na({props:{clientManager:e[1]}}),{c(){t=I("section"),n=I("h3"),n.textContent="Controls",r=M(),Oe(a.$$.fragment),o=M(),i=I("section"),s=I("h3"),s.textContent="Players",l=M(),Oe(c.$$.fragment),u=M(),d=I("section"),f=I("h3"),f.textContent="Moves",p=M(),v=I("ul");for(let e=0;e<U.length;e+=1)U[e].c();g=M(),h=I("section"),m=I("h3"),m.textContent="Events",y=M(),b=I("ul"),L&&L.c(),$=M(),J&&J.c(),P=M(),K&&K.c(),w=M(),k=I("section"),A=I("h3"),A.textContent="G",S=M(),Oe(D.$$.fragment),j=M(),N=I("section"),C=I("h3"),C.textContent="ctx",z=M(),Oe(G.$$.fragment),q=M(),Oe(V.$$.fragment),T(n,"class","svelte-146sq5f"),T(s,"class","svelte-146sq5f"),T(f,"class","svelte-146sq5f"),T(v,"class","svelte-146sq5f"),T(m,"class","svelte-146sq5f"),T(b,"class","svelte-146sq5f"),T(A,"class","label svelte-146sq5f"),T(k,"class","tree svelte-146sq5f"),T(C,"class","label svelte-146sq5f"),T(N,"class","tree svelte-146sq5f")},m(e,O){E(e,t,O),x(t,n),x(t,r),_e(a,t,null),E(e,o,O),E(e,i,O),x(i,s),x(i,l),_e(c,i,null),E(e,u,O),E(e,d,O),x(d,f),x(d,p),x(d,v);for(let e=0;e<U.length;e+=1)U[e].m(v,null);E(e,g,O),E(e,h,O),x(h,m),x(h,y),x(h,b),L&&L.m(b,null),x(b,$),J&&J.m(b,null),x(b,P),K&&K.m(b,null),E(e,w,O),E(e,k,O),x(k,A),x(k,S),_e(D,k,null),E(e,j,O),E(e,N,O),x(N,C),x(N,z),_e(G,N,null),E(e,q,O),_e(V,e,O),R=!0},p(e,[t]){const n={};1&t&&(n.client=e[0]),4&t&&(n.ToggleVisibility=e[2]),a.$set(n);const r={};if(64&t&&(r.ctx=e[6]),8&t&&(r.playerID=e[3]),c.$set(r),272&t){let n;for(B=Object.entries(e[4]),n=0;n<B.length;n+=1){const r=Po(e,B,n);U[n]?(U[n].p(r,t),ye(U[n],1)):(U[n]=wo(r),U[n].c(),ye(U[n],1),U[n].m(v,null))}for(he(),n=B.length;n<U.length;n+=1)F(n);me()}e[6].activePlayers&&e[5].endStage?L?(L.p(e,t),96&t&&ye(L,1)):(L=ko(e),L.c(),ye(L,1),L.m(b,$)):L&&(he(),be(L,1,1,()=>{L=null}),me()),e[5].endTurn?J?(J.p(e,t),32&t&&ye(J,1)):(J=Eo(e),J.c(),ye(J,1),J.m(b,P)):J&&(he(),be(J,1,1,()=>{J=null}),me()),e[6].phase&&e[5].endPhase?K?(K.p(e,t),96&t&&ye(K,1)):(K=Oo(e),K.c(),ye(K,1),K.m(b,null)):K&&(he(),be(K,1,1,()=>{K=null}),me());const o={};128&t&&(o.value=e[7]),D.$set(o);const i={};64&t&&(i.value=Io(e[6])),G.$set(i);const s={};2&t&&(s.clientManager=e[1]),V.$set(s)},i(e){if(!R){ye(a.$$.fragment,e),ye(c.$$.fragment,e);for(let e=0;e<B.length;e+=1)ye(U[e]);ye(L),ye(J),ye(K),ye(D.$$.fragment,e),ye(G.$$.fragment,e),ye(V.$$.fragment,e),R=!0}},o(e){be(a.$$.fragment,e),be(c.$$.fragment,e),U=U.filter(Boolean);for(let e=0;e<U.length;e+=1)be(U[e]);be(L),be(J),be(K),be(D.$$.fragment,e),be(G.$$.fragment,e),be(V.$$.fragment,e),R=!1},d(e){e&&O(t),Ie(a),e&&O(o),e&&O(i),Ie(c),e&&O(u),e&&O(d),_(U,e),e&&O(g),e&&O(h),L&&L.d(),J&&J.d(),K&&K.d(),e&&O(w),e&&O(k),Ie(D),e&&O(j),e&&O(N),Ie(G),e&&O(q),Ie(V,e)}}}function Io(e){let t={};for(const n in e)n.startsWith("_")||(t[n]=e[n]);return t}function Ao(e,t,n){let{client:r}=t,{clientManager:a}=t,{ToggleVisibility:o}=t;const i=function(e,t){var n,r={},a={},o=$o(t);try{for(o.s();!(n=o.n()).done;){a[n.value]=!0}}catch(e){o.e(e)}finally{o.f()}var i=a,s=!0;for(var l in e){var c=l[0];if(i[c]){s=!1;break}i[c]=!0,r[l]=c}if(s)return r;i=a;var u=97;for(var d in r={},e){for(var f=String.fromCharCode(u);i[f];)u++,f=String.fromCharCode(u);i[f]=!0,r[d]=f}return r}(r.moves,"mlia");let{playerID:s,moves:l,events:c}=r,u={},d={};r.subscribe(e=>{e&&n(7,({G:d,ctx:u}=e),d,n(6,u)),n(3,({playerID:s,moves:l,events:c}=r),s,n(4,l),n(5,c))});return e.$$set=e=>{"client"in e&&n(0,r=e.client),"clientManager"in e&&n(1,a=e.clientManager),"ToggleVisibility"in e&&n(2,o=e.ToggleVisibility)},[r,a,o,s,l,c,u,d,i,e=>a.switchPlayerID(e.detail.playerID)]}class So extends Me{constructor(e){super(),Se(this,e,Ao,_o,c,{client:0,clientManager:1,ToggleVisibility:2},xo)}}function Mo(e){P(e,"svelte-13qih23",".item.svelte-13qih23.svelte-13qih23{padding:10px}.item.svelte-13qih23.svelte-13qih23:not(:first-child){border-top:1px dashed #aaa}.item.svelte-13qih23 div.svelte-13qih23{float:right;text-align:right}")}function Do(e){let t,r,a,o,i,s,l=JSON.stringify(e[1])+"";return{c(){t=I("div"),r=I("strong"),a=S(e[0]),o=M(),i=I("div"),s=S(l),T(i,"class","svelte-13qih23"),T(t,"class","item svelte-13qih23")},m(e,n){E(e,t,n),x(t,r),x(r,a),x(t,o),x(t,i),x(i,s)},p(e,[t]){1&t&&C(a,e[0]),2&t&&l!==(l=JSON.stringify(e[1])+"")&&C(s,l)},i:n,o:n,d(e){e&&O(t)}}}function jo(e,t,n){let{name:r}=t,{value:a}=t;return e.$$set=e=>{"name"in e&&n(0,r=e.name),"value"in e&&n(1,a=e.value)},[r,a]}class No extends Me{constructor(e){super(),Se(this,e,jo,Do,c,{name:0,value:1},Mo)}}function To(e){P(e,"svelte-1yzq5o8",".gameinfo.svelte-1yzq5o8{padding:10px}")}function Co(e){let t,n;return t=new No({props:{name:"isConnected",value:e[1].isConnected}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.value=e[1].isConnected),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function zo(e){let t,n,r,a,o,i,s,l;n=new No({props:{name:"matchID",value:e[0].matchID}}),a=new No({props:{name:"playerID",value:e[0].playerID}}),i=new No({props:{name:"isActive",value:e[1].isActive}});let c=e[0].multiplayer&&Co(e);return{c(){t=I("section"),Oe(n.$$.fragment),r=M(),Oe(a.$$.fragment),o=M(),Oe(i.$$.fragment),s=M(),c&&c.c(),T(t,"class","gameinfo svelte-1yzq5o8")},m(e,u){E(e,t,u),_e(n,t,null),x(t,r),_e(a,t,null),x(t,o),_e(i,t,null),x(t,s),c&&c.m(t,null),l=!0},p(e,[r]){const o={};1&r&&(o.value=e[0].matchID),n.$set(o);const s={};1&r&&(s.value=e[0].playerID),a.$set(s);const l={};2&r&&(l.value=e[1].isActive),i.$set(l),e[0].multiplayer?c?(c.p(e,r),1&r&&ye(c,1)):(c=Co(e),c.c(),ye(c,1),c.m(t,null)):c&&(he(),be(c,1,1,()=>{c=null}),me())},i(e){l||(ye(n.$$.fragment,e),ye(a.$$.fragment,e),ye(i.$$.fragment,e),ye(c),l=!0)},o(e){be(n.$$.fragment,e),be(a.$$.fragment,e),be(i.$$.fragment,e),be(c),l=!1},d(e){e&&O(t),Ie(n),Ie(a),Ie(i),c&&c.d()}}}function Go(e,t,r){let a,o=n,i=()=>(o(),o=u(s,e=>r(1,a=e)),s);e.$$.on_destroy.push(()=>o());let{client:s}=t;i();let{clientManager:l}=t,{ToggleVisibility:c}=t;return e.$$set=e=>{"client"in e&&i(r(0,s=e.client)),"clientManager"in e&&r(2,l=e.clientManager),"ToggleVisibility"in e&&r(3,c=e.ToggleVisibility)},[s,a,l,c]}class qo extends Me{constructor(e){super(),Se(this,e,Go,zo,c,{client:0,clientManager:2,ToggleVisibility:3},To)}}function Vo(e){P(e,"svelte-6eza86",".turn-marker.svelte-6eza86{display:flex;justify-content:center;align-items:center;grid-column:1;background:#555;color:#eee;text-align:center;font-weight:bold;border:1px solid #888}")}function Ro(e){let t,r;return{c(){t=I("div"),r=S(e[0]),T(t,"class","turn-marker svelte-6eza86"),T(t,"style",e[1])},m(e,n){E(e,t,n),x(t,r)},p(e,[t]){1&t&&C(r,e[0])},i:n,o:n,d(e){e&&O(t)}}}function Bo(e,t,n){let{turn:r}=t,{numEvents:a}=t;const o="grid-row: span "+a;return e.$$set=e=>{"turn"in e&&n(0,r=e.turn),"numEvents"in e&&n(2,a=e.numEvents)},[r,o,a]}class Uo extends Me{constructor(e){super(),Se(this,e,Bo,Ro,c,{turn:0,numEvents:2},Vo)}}function Fo(e){P(e,"svelte-1t4xap",".phase-marker.svelte-1t4xap{grid-column:3;background:#555;border:1px solid #888;color:#eee;text-align:center;font-weight:bold;padding-top:10px;padding-bottom:10px;text-orientation:sideways;writing-mode:vertical-rl;line-height:30px;width:100%}")}function Lo(e){let t,r,a=(e[0]||"")+"";return{c(){t=I("div"),r=S(a),T(t,"class","phase-marker svelte-1t4xap"),T(t,"style",e[1])},m(e,n){E(e,t,n),x(t,r)},p(e,[t]){1&t&&a!==(a=(e[0]||"")+"")&&C(r,a)},i:n,o:n,d(e){e&&O(t)}}}function Jo(e,t,n){let{phase:r}=t,{numEvents:a}=t;const o="grid-row: span "+a;return e.$$set=e=>{"phase"in e&&n(0,r=e.phase),"numEvents"in e&&n(2,a=e.numEvents)},[r,o,a]}class Ko extends Me{constructor(e){super(),Se(this,e,Jo,Lo,c,{phase:0,numEvents:2},Fo)}}function Ho(e){let t;return{c(){t=I("div"),t.textContent=""+e[0]},m(e,n){E(e,t,n)},p:n,i:n,o:n,d(e){e&&O(t)}}}function Wo(e,t,n){let{metadata:r}=t;const a=void 0!==r?JSON.stringify(r,null,4):"";return e.$$set=e=>{"metadata"in e&&n(1,r=e.metadata)},[a,r]}class Zo extends Me{constructor(e){super(),Se(this,e,Wo,Ho,c,{metadata:1})}}function Yo(e){P(e,"svelte-vajd9z",".log-event.svelte-vajd9z{grid-column:2;cursor:pointer;overflow:hidden;display:flex;flex-direction:column;justify-content:center;background:#fff;border:1px dotted #ccc;border-left:5px solid #ccc;padding:5px;text-align:center;color:#666;font-size:14px;min-height:25px;line-height:25px}.log-event.svelte-vajd9z:hover,.log-event.svelte-vajd9z:focus{border-style:solid;background:#eee}.log-event.pinned.svelte-vajd9z{border-style:solid;background:#eee;opacity:1}.args.svelte-vajd9z{text-align:left;white-space:pre-wrap}.player0.svelte-vajd9z{border-left-color:#ff851b}.player1.svelte-vajd9z{border-left-color:#7fdbff}.player2.svelte-vajd9z{border-left-color:#0074d9}.player3.svelte-vajd9z{border-left-color:#39cccc}.player4.svelte-vajd9z{border-left-color:#3d9970}.player5.svelte-vajd9z{border-left-color:#2ecc40}.player6.svelte-vajd9z{border-left-color:#01ff70}.player7.svelte-vajd9z{border-left-color:#ffdc00}.player8.svelte-vajd9z{border-left-color:#001f3f}.player9.svelte-vajd9z{border-left-color:#ff4136}.player10.svelte-vajd9z{border-left-color:#85144b}.player11.svelte-vajd9z{border-left-color:#f012be}.player12.svelte-vajd9z{border-left-color:#b10dc9}.player13.svelte-vajd9z{border-left-color:#111111}.player14.svelte-vajd9z{border-left-color:#aaaaaa}.player15.svelte-vajd9z{border-left-color:#dddddd}")}function Xo(e){let t,n;return t=new Zo({props:{metadata:e[2]}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.metadata=e[2]),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function Qo(e){let t,n,r;var a=e[3];function o(e){return{props:{metadata:e[2]}}}return a&&(t=new a(o(e))),{c(){t&&Oe(t.$$.fragment),n=D()},m(e,a){t&&_e(t,e,a),E(e,n,a),r=!0},p(e,r){const i={};if(4&r&&(i.metadata=e[2]),a!==(a=e[3])){if(t){he();const e=t;be(e.$$.fragment,1,0,()=>{Ie(e,1)}),me()}a?(t=new a(o(e)),Oe(t.$$.fragment),ye(t.$$.fragment,1),_e(t,n.parentNode,n)):t=null}else a&&t.$set(i)},i(e){r||(t&&ye(t.$$.fragment,e),r=!0)},o(e){t&&be(t.$$.fragment,e),r=!1},d(e){e&&O(n),t&&Ie(t,e)}}}function ei(e){let t,n,r,a,o,i,l,c,u,d,f,p,v;const g=[Qo,Xo],h=[];function m(e,t){return e[3]?0:1}return c=m(e),u=h[c]=g[c](e),{c(){t=I("button"),n=I("div"),r=S(e[4]),a=S("("),o=S(e[6]),i=S(")"),l=M(),u.c(),T(n,"class","args svelte-vajd9z"),T(t,"class",d="log-event player"+e[7]+" svelte-vajd9z"),V(t,"pinned",e[1])},m(s,u){E(s,t,u),x(t,n),x(n,r),x(n,a),x(n,o),x(n,i),x(t,l),h[c].m(t,null),f=!0,p||(v=[j(t,"click",e[9]),j(t,"mouseenter",e[10]),j(t,"focus",e[11]),j(t,"mouseleave",e[12]),j(t,"blur",e[13])],p=!0)},p(e,[n]){(!f||16&n)&&C(r,e[4]);let a=c;c=m(e),c===a?h[c].p(e,n):(he(),be(h[a],1,1,()=>{h[a]=null}),me(),u=h[c],u?u.p(e,n):(u=h[c]=g[c](e),u.c()),ye(u,1),u.m(t,null)),2&n&&V(t,"pinned",e[1])},i(e){f||(ye(u),f=!0)},o(e){be(u),f=!1},d(e){e&&O(t),h[c].d(),p=!1,s(v)}}}function ti(e,t,n){let{logIndex:r}=t,{action:a}=t,{pinned:o}=t,{metadata:i}=t,{metadataComponent:s}=t;const l=Z(),c=a.payload.args,u=Array.isArray(c)?c.map(e=>JSON.stringify(e,null,2)).join(","):JSON.stringify(c,null,2)||"",d=a.payload.playerID;let f;switch(a.type){case"UNDO":f="undo";break;case"REDO":f="redo";case"GAME_EVENT":case"MAKE_MOVE":default:f=a.payload.type}return e.$$set=e=>{"logIndex"in e&&n(0,r=e.logIndex),"action"in e&&n(8,a=e.action),"pinned"in e&&n(1,o=e.pinned),"metadata"in e&&n(2,i=e.metadata),"metadataComponent"in e&&n(3,s=e.metadataComponent)},[r,o,i,s,f,l,u,d,a,()=>l("click",{logIndex:r}),()=>l("mouseenter",{logIndex:r}),()=>l("mouseenter",{logIndex:r}),()=>l("mouseleave"),()=>l("mouseleave")]}class ni extends Me{constructor(e){super(),Se(this,e,ti,ei,c,{logIndex:0,action:8,pinned:1,metadata:2,metadataComponent:3},Yo)}}function ri(e){let t;return{c(){t=A("path"),T(t,"d","M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function ai(e){let t,n;const r=[{viewBox:"0 0 512 512"},e[0]];let o={$$slots:{default:[ri]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=a(o,r[e]);return t=new cr({props:o}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,[n]){const a=1&n?ke(r,[r[0],Ee(e[0])]):{};2&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function oi(e,t,n){return e.$$set=e=>{n(0,t=a(a({},t),p(e)))},[t=p(t)]}class ii extends Me{constructor(e){super(),Se(this,e,oi,ai,c,{})}}function si(e){P(e,"svelte-1a7time","div.svelte-1a7time{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:500px}")}function li(e){let t,r;return{c(){t=I("div"),r=S(e[0]),T(t,"alt",e[0]),T(t,"class","svelte-1a7time")},m(e,n){E(e,t,n),x(t,r)},p(e,[n]){1&n&&C(r,e[0]),1&n&&T(t,"alt",e[0])},i:n,o:n,d(e){e&&O(t)}}}function ci(e,t,n){let r,{action:a}=t;return e.$$set=e=>{"action"in e&&n(1,a=e.action)},e.$$.update=()=>{if(2&e.$$.dirty){const{type:e,args:t}=a.payload,o=(t||[]).join(",");n(0,r=`${e}(${o})`)}},[r,a]}class ui extends Me{constructor(e){super(),Se(this,e,ci,li,c,{action:1},si)}}function di(e){P(e,"svelte-ztcwsu","table.svelte-ztcwsu.svelte-ztcwsu{font-size:12px;border-collapse:collapse;border:1px solid #ddd;padding:0}tr.svelte-ztcwsu.svelte-ztcwsu{cursor:pointer}tr.svelte-ztcwsu:hover td.svelte-ztcwsu{background:#eee}tr.selected.svelte-ztcwsu td.svelte-ztcwsu{background:#eee}td.svelte-ztcwsu.svelte-ztcwsu{padding:10px;height:10px;line-height:10px;font-size:12px;border:none}th.svelte-ztcwsu.svelte-ztcwsu{background:#888;color:#fff;padding:10px;text-align:center}")}function fi(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function pi(e){let t,n,r,a,o,i,l,c,u,d,f,p,v,g=e[10].value+"",h=e[10].visits+"";function m(){return e[6](e[10],e[12])}function y(){return e[7](e[12])}function b(){return e[8](e[10],e[12])}return u=new ui({props:{action:e[10].parentAction}}),{c(){t=I("tr"),n=I("td"),r=S(g),a=M(),o=I("td"),i=S(h),l=M(),c=I("td"),Oe(u.$$.fragment),d=M(),T(n,"class","svelte-ztcwsu"),T(o,"class","svelte-ztcwsu"),T(c,"class","svelte-ztcwsu"),T(t,"class","svelte-ztcwsu"),V(t,"clickable",e[1].length>0),V(t,"selected",e[12]===e[0])},m(e,s){E(e,t,s),x(t,n),x(n,r),x(t,a),x(t,o),x(o,i),x(t,l),x(t,c),_e(u,c,null),x(t,d),f=!0,p||(v=[j(t,"click",m),j(t,"mouseout",y),j(t,"mouseover",b)],p=!0)},p(n,a){e=n,(!f||2&a)&&g!==(g=e[10].value+"")&&C(r,g),(!f||2&a)&&h!==(h=e[10].visits+"")&&C(i,h);const o={};2&a&&(o.action=e[10].parentAction),u.$set(o),2&a&&V(t,"clickable",e[1].length>0),1&a&&V(t,"selected",e[12]===e[0])},i(e){f||(ye(u.$$.fragment,e),f=!0)},o(e){be(u.$$.fragment,e),f=!1},d(e){e&&O(t),Ie(u),p=!1,s(v)}}}function vi(e){let t,n,r,a,o,i=e[1],s=[];for(let t=0;t<i.length;t+=1)s[t]=pi(fi(e,i,t));const l=e=>be(s[e],1,1,()=>{s[e]=null});return{c(){t=I("table"),n=I("thead"),n.innerHTML='<th class="svelte-ztcwsu">Value</th> \n    <th class="svelte-ztcwsu">Visits</th> \n    <th class="svelte-ztcwsu">Action</th>',r=M(),a=I("tbody");for(let e=0;e<s.length;e+=1)s[e].c();T(t,"class","svelte-ztcwsu")},m(e,i){E(e,t,i),x(t,n),x(t,r),x(t,a);for(let e=0;e<s.length;e+=1)s[e].m(a,null);o=!0},p(e,[t]){if(15&t){let n;for(i=e[1],n=0;n<i.length;n+=1){const r=fi(e,i,n);s[n]?(s[n].p(r,t),ye(s[n],1)):(s[n]=pi(r),s[n].c(),ye(s[n],1),s[n].m(a,null))}for(he(),n=i.length;n<s.length;n+=1)l(n);me()}},i(e){if(!o){for(let e=0;e<i.length;e+=1)ye(s[e]);o=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)be(s[e]);o=!1},d(e){e&&O(t),_(s,e)}}}function gi(e,t,n){let{root:r}=t,{selectedIndex:a=null}=t;const o=Z();let i=[],s=[];function l(e,t){o("select",{node:e,selectedIndex:t})}function c(e,t){null===a&&o("preview",{node:e})}return e.$$set=e=>{"root"in e&&n(4,r=e.root),"selectedIndex"in e&&n(0,a=e.selectedIndex)},e.$$.update=()=>{if(48&e.$$.dirty){let e=r;for(n(5,i=[]);e.parent;){const t=e.parent,{type:n,args:r}=e.parentAction.payload,a=`${n}(${(r||[]).join(",")})`;i.push({parent:t,arrowText:a}),e=t}i.reverse(),n(1,s=[...r.children].sort((e,t)=>e.visits<t.visits?1:-1).slice(0,50))}},[a,s,l,c,r,i,(e,t)=>l(e,t),e=>c(null),(e,t)=>c(e)]}class hi extends Me{constructor(e){super(),Se(this,e,gi,vi,c,{root:4,selectedIndex:0},di)}}function mi(e){P(e,"svelte-1f0amz4",".visualizer.svelte-1f0amz4{display:flex;flex-direction:column;align-items:center;padding:50px}.preview.svelte-1f0amz4{opacity:0.5}.icon.svelte-1f0amz4{color:#777;width:32px;height:32px;margin-bottom:20px}")}function yi(e,t,n){const r=e.slice();return r[9]=t[n].node,r[10]=t[n].selectedIndex,r[12]=n,r}function bi(e){let t,n;return t=new hi({props:{root:e[9],selectedIndex:e[10]}}),t.$on("select",(function(...t){return e[7](e[12],...t)})),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(n,r){e=n;const a={};1&r&&(a.root=e[9]),1&r&&(a.selectedIndex=e[10]),t.$set(a)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function $i(e){let t,n;return t=new hi({props:{root:e[9]}}),t.$on("select",(function(...t){return e[5](e[12],...t)})),t.$on("preview",(function(...t){return e[6](e[12],...t)})),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(n,r){e=n;const a={};1&r&&(a.root=e[9]),t.$set(a)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function xi(e){let t,n,r,a,o,i=0!==e[12]&&function(e){let t,n,r;return n=new ii({}),{c(){t=I("div"),Oe(n.$$.fragment),T(t,"class","icon svelte-1f0amz4")},m(e,a){E(e,t,a),_e(n,t,null),r=!0},i(e){r||(ye(n.$$.fragment,e),r=!0)},o(e){be(n.$$.fragment,e),r=!1},d(e){e&&O(t),Ie(n)}}}();const s=[$i,bi],l=[];function c(e,t){return e[12]===e[0].length-1?0:1}return r=c(e),a=l[r]=s[r](e),{c(){i&&i.c(),t=M(),n=I("section"),a.c()},m(e,a){i&&i.m(e,a),E(e,t,a),E(e,n,a),l[r].m(n,null),o=!0},p(e,t){let o=r;r=c(e),r===o?l[r].p(e,t):(he(),be(l[o],1,1,()=>{l[o]=null}),me(),a=l[r],a?a.p(e,t):(a=l[r]=s[r](e),a.c()),ye(a,1),a.m(n,null))},i(e){o||(ye(i),ye(a),o=!0)},o(e){be(i),be(a),o=!1},d(e){i&&i.d(e),e&&O(t),e&&O(n),l[r].d()}}}function Pi(e){let t,n,r,a,o,i;return n=new ii({}),o=new hi({props:{root:e[1]}}),{c(){t=I("div"),Oe(n.$$.fragment),r=M(),a=I("section"),Oe(o.$$.fragment),T(t,"class","icon svelte-1f0amz4"),T(a,"class","preview svelte-1f0amz4")},m(e,s){E(e,t,s),_e(n,t,null),E(e,r,s),E(e,a,s),_e(o,a,null),i=!0},p(e,t){const n={};2&t&&(n.root=e[1]),o.$set(n)},i(e){i||(ye(n.$$.fragment,e),ye(o.$$.fragment,e),i=!0)},o(e){be(n.$$.fragment,e),be(o.$$.fragment,e),i=!1},d(e){e&&O(t),Ie(n),e&&O(r),e&&O(a),Ie(o)}}}function wi(e){let t,n,r,a=e[0],o=[];for(let t=0;t<a.length;t+=1)o[t]=xi(yi(e,a,t));const i=e=>be(o[e],1,1,()=>{o[e]=null});let s=e[1]&&Pi(e);return{c(){t=I("div");for(let e=0;e<o.length;e+=1)o[e].c();n=M(),s&&s.c(),T(t,"class","visualizer svelte-1f0amz4")},m(e,a){E(e,t,a);for(let e=0;e<o.length;e+=1)o[e].m(t,null);x(t,n),s&&s.m(t,null),r=!0},p(e,[r]){if(13&r){let s;for(a=e[0],s=0;s<a.length;s+=1){const i=yi(e,a,s);o[s]?(o[s].p(i,r),ye(o[s],1)):(o[s]=xi(i),o[s].c(),ye(o[s],1),o[s].m(t,n))}for(he(),s=a.length;s<o.length;s+=1)i(s);me()}e[1]?s?(s.p(e,r),2&r&&ye(s,1)):(s=Pi(e),s.c(),ye(s,1),s.m(t,null)):s&&(he(),be(s,1,1,()=>{s=null}),me())},i(e){if(!r){for(let e=0;e<a.length;e+=1)ye(o[e]);ye(s),r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)be(o[e]);be(s),r=!1},d(e){e&&O(t),_(o,e),s&&s.d()}}}function ki(e,t,n){let{metadata:r}=t,a=[],o=null;function i({node:e,selectedIndex:t},r){n(1,o=null),n(0,a[r].selectedIndex=t,a),n(0,a=[...a.slice(0,r+1),{node:e}])}function s({node:e},t){n(1,o=e)}return e.$$set=e=>{"metadata"in e&&n(4,r=e.metadata)},e.$$.update=()=>{16&e.$$.dirty&&n(0,a=[{node:r}])},[a,o,i,s,r,(e,t)=>i(t.detail,e),(e,t)=>s(t.detail),(e,t)=>i(t.detail,e)]}class Ei extends Me{constructor(e){super(),Se(this,e,ki,wi,c,{metadata:4},mi)}}function Oi(e){P(e,"svelte-1pq5e4b",".gamelog.svelte-1pq5e4b{display:grid;grid-template-columns:30px 1fr 30px;grid-auto-rows:auto;grid-auto-flow:column}")}function _i(e,t,n){const r=e.slice();return r[16]=t[n].phase,r[18]=n,r}function Ii(e,t,n){const r=e.slice();return r[19]=t[n].action,r[20]=t[n].metadata,r[18]=n,r}function Ai(e,t,n){const r=e.slice();return r[22]=t[n].turn,r[18]=n,r}function Si(e){let t,n;return t=new Uo({props:{turn:e[22],numEvents:e[3][e[18]]}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.turn=e[22]),8&n&&(r.numEvents=e[3][e[18]]),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function Mi(e){let t,n,r=e[18]in e[3]&&Si(e);return{c(){r&&r.c(),t=D()},m(e,a){r&&r.m(e,a),E(e,t,a),n=!0},p(e,n){e[18]in e[3]?r?(r.p(e,n),8&n&&ye(r,1)):(r=Si(e),r.c(),ye(r,1),r.m(t.parentNode,t)):r&&(he(),be(r,1,1,()=>{r=null}),me())},i(e){n||(ye(r),n=!0)},o(e){be(r),n=!1},d(e){r&&r.d(e),e&&O(t)}}}function Di(e){let t,n;return t=new ni({props:{pinned:e[18]===e[2],logIndex:e[18],action:e[19],metadata:e[20]}}),t.$on("click",e[5]),t.$on("mouseenter",e[6]),t.$on("mouseleave",e[7]),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.pinned=e[18]===e[2]),2&n&&(r.action=e[19]),2&n&&(r.metadata=e[20]),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function ji(e){let t,n;return t=new Ko({props:{phase:e[16],numEvents:e[4][e[18]]}}),{c(){Oe(t.$$.fragment)},m(e,r){_e(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.phase=e[16]),16&n&&(r.numEvents=e[4][e[18]]),t.$set(r)},i(e){n||(ye(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){Ie(t,e)}}}function Ni(e){let t,n,r=e[18]in e[4]&&ji(e);return{c(){r&&r.c(),t=D()},m(e,a){r&&r.m(e,a),E(e,t,a),n=!0},p(e,n){e[18]in e[4]?r?(r.p(e,n),16&n&&ye(r,1)):(r=ji(e),r.c(),ye(r,1),r.m(t.parentNode,t)):r&&(he(),be(r,1,1,()=>{r=null}),me())},i(e){n||(ye(r),n=!0)},o(e){be(r),n=!1},d(e){r&&r.d(e),e&&O(t)}}}function Ti(e){let t,n,r,a,o,i,s=e[1],l=[];for(let t=0;t<s.length;t+=1)l[t]=Mi(Ai(e,s,t));const c=e=>be(l[e],1,1,()=>{l[e]=null});let u=e[1],d=[];for(let t=0;t<u.length;t+=1)d[t]=Di(Ii(e,u,t));const f=e=>be(d[e],1,1,()=>{d[e]=null});let p=e[1],v=[];for(let t=0;t<p.length;t+=1)v[t]=Ni(_i(e,p,t));const g=e=>be(v[e],1,1,()=>{v[e]=null});return{c(){t=I("div");for(let e=0;e<l.length;e+=1)l[e].c();n=M();for(let e=0;e<d.length;e+=1)d[e].c();r=M();for(let e=0;e<v.length;e+=1)v[e].c();T(t,"class","gamelog svelte-1pq5e4b"),V(t,"pinned",e[2])},m(s,c){E(s,t,c);for(let e=0;e<l.length;e+=1)l[e].m(t,null);x(t,n);for(let e=0;e<d.length;e+=1)d[e].m(t,null);x(t,r);for(let e=0;e<v.length;e+=1)v[e].m(t,null);a=!0,o||(i=j(window,"keydown",e[8]),o=!0)},p(e,[a]){if(10&a){let r;for(s=e[1],r=0;r<s.length;r+=1){const o=Ai(e,s,r);l[r]?(l[r].p(o,a),ye(l[r],1)):(l[r]=Mi(o),l[r].c(),ye(l[r],1),l[r].m(t,n))}for(he(),r=s.length;r<l.length;r+=1)c(r);me()}if(230&a){let n;for(u=e[1],n=0;n<u.length;n+=1){const o=Ii(e,u,n);d[n]?(d[n].p(o,a),ye(d[n],1)):(d[n]=Di(o),d[n].c(),ye(d[n],1),d[n].m(t,r))}for(he(),n=u.length;n<d.length;n+=1)f(n);me()}if(18&a){let n;for(p=e[1],n=0;n<p.length;n+=1){const r=_i(e,p,n);v[n]?(v[n].p(r,a),ye(v[n],1)):(v[n]=Ni(r),v[n].c(),ye(v[n],1),v[n].m(t,null))}for(he(),n=p.length;n<v.length;n+=1)g(n);me()}4&a&&V(t,"pinned",e[2])},i(e){if(!a){for(let e=0;e<s.length;e+=1)ye(l[e]);for(let e=0;e<u.length;e+=1)ye(d[e]);for(let e=0;e<p.length;e+=1)ye(v[e]);a=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)be(l[e]);d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)be(d[e]);v=v.filter(Boolean);for(let e=0;e<v.length;e+=1)be(v[e]);a=!1},d(e){e&&O(t),_(l,e),_(d,e),_(v,e),o=!1,i()}}}function Ci(e,t,r){let a,o=n,i=()=>(o(),o=u(s,e=>r(10,a=e)),s);e.$$.on_destroy.push(()=>o());let{client:s}=t;i();const{secondaryPane:l}=X("secondaryPane"),c=Zn({game:s.game}),d=s.getInitialState();let f,{log:p}=a,v=null;function g(e){let t=d;for(let n=0;n<p.length;n++){const{action:r,automatic:a}=p[n];if(!a){if(t=c(t,r),0==e)break;e--}}return{G:t.G,ctx:t.ctx,plugins:t.plugins}}function h(){r(2,v=null),s.overrideGameState(null),l.set(null)}W(h);let m={},y={};return e.$$set=e=>{"client"in e&&i(r(0,s=e.client))},e.$$.update=()=>{if(1538&e.$$.dirty){r(9,p=a.log),r(1,f=p.filter(e=>!e.automatic));let e=0,t=0;r(3,m={}),r(4,y={});for(let n=0;n<f.length;n++){const{action:a,payload:o,turn:i,phase:s}=f[n];t++,e++,n!=f.length-1&&f[n+1].turn==i||(r(3,m[n]=t,m),t=0),n!=f.length-1&&f[n+1].phase==s||(r(4,y[n]=e,y),e=0)}}},[s,f,v,m,y,function(e){const{logIndex:t}=e.detail,n=g(t),a=p.filter(e=>!e.automatic);if(s.overrideGameState(n),v==t)r(2,v=null),l.set(null);else{r(2,v=t);const{metadata:e}=a[t].action.payload;e&&l.set({component:Ei,metadata:e})}},function(e){const{logIndex:t}=e.detail;if(null===v){const e=g(t);s.overrideGameState(e)}},function(){null===v&&s.overrideGameState(null)},function(e){27==e.keyCode&&h()},p,a]}class zi extends Me{constructor(e){super(),Se(this,e,Ci,Ti,c,{client:0},Oi)}}function Gi(e){P(e,"svelte-1fu900w","label.svelte-1fu900w{color:#666}.option.svelte-1fu900w{margin-bottom:20px}.value.svelte-1fu900w{font-weight:bold;color:#000}input[type='checkbox'].svelte-1fu900w{vertical-align:middle}")}function qi(e,t,n){const r=e.slice();return r[6]=t[n][0],r[7]=t[n][1],r[8]=t,r[9]=n,r}function Vi(e){let t,n,r,a;function o(){e[5].call(t,e[6])}return{c(){t=I("input"),T(t,"id",n=e[3](e[6])),T(t,"type","checkbox"),T(t,"class","svelte-1fu900w")},m(n,i){E(n,t,i),t.checked=e[1][e[6]],r||(a=[j(t,"change",o),j(t,"change",e[2])],r=!0)},p(r,a){e=r,1&a&&n!==(n=e[3](e[6]))&&T(t,"id",n),3&a&&(t.checked=e[1][e[6]])},d(e){e&&O(t),r=!1,s(a)}}}function Ri(e){let t,n,r,a,o,i,l,c,u,d=e[1][e[6]]+"";function f(){e[4].call(a,e[6])}return{c(){t=I("span"),n=S(d),r=M(),a=I("input"),T(t,"class","value svelte-1fu900w"),T(a,"id",o=e[3](e[6])),T(a,"type","range"),T(a,"min",i=e[7].range.min),T(a,"max",l=e[7].range.max)},m(o,i){E(o,t,i),x(t,n),E(o,r,i),E(o,a,i),z(a,e[1][e[6]]),c||(u=[j(a,"change",f),j(a,"input",f),j(a,"change",e[2])],c=!0)},p(t,r){e=t,3&r&&d!==(d=e[1][e[6]]+"")&&C(n,d),1&r&&o!==(o=e[3](e[6]))&&T(a,"id",o),1&r&&i!==(i=e[7].range.min)&&T(a,"min",i),1&r&&l!==(l=e[7].range.max)&&T(a,"max",l),3&r&&z(a,e[1][e[6]])},d(e){e&&O(t),e&&O(r),e&&O(a),c=!1,s(u)}}}function Bi(e){let t,n,r,a,o,i,s=e[6]+"";function l(e,t){return e[7].range?Ri:"boolean"==typeof e[7].value?Vi:void 0}let c=l(e),u=c&&c(e);return{c(){t=I("div"),n=I("label"),r=S(s),o=M(),u&&u.c(),i=M(),T(n,"for",a=e[3](e[6])),T(n,"class","svelte-1fu900w"),T(t,"class","option svelte-1fu900w")},m(e,a){E(e,t,a),x(t,n),x(n,r),x(t,o),u&&u.m(t,null),x(t,i)},p(e,o){1&o&&s!==(s=e[6]+"")&&C(r,s),1&o&&a!==(a=e[3](e[6]))&&T(n,"for",a),c===(c=l(e))&&u?u.p(e,o):(u&&u.d(1),u=c&&c(e),u&&(u.c(),u.m(t,i)))},d(e){e&&O(t),u&&u.d()}}}function Ui(e){let t,r=Object.entries(e[0].opts()),a=[];for(let t=0;t<r.length;t+=1)a[t]=Bi(qi(e,r,t));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=D()},m(e,n){for(let t=0;t<a.length;t+=1)a[t].m(e,n);E(e,t,n)},p(e,[n]){if(15&n){let o;for(r=Object.entries(e[0].opts()),o=0;o<r.length;o+=1){const i=qi(e,r,o);a[o]?a[o].p(i,n):(a[o]=Bi(i),a[o].c(),a[o].m(t.parentNode,t))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}},i:n,o:n,d(e){_(a,e),e&&O(t)}}}function Fi(e,t,n){let{bot:r}=t,a={};for(let[e,t]of Object.entries(r.opts()))a[e]=t.value;return e.$$set=e=>{"bot"in e&&n(0,r=e.bot)},[r,a,function(){for(let[e,t]of Object.entries(a))r.setOpt(e,t)},e=>"ai-option-"+e,function(e){var t;a[e]=""===(t=this.value)?null:+t,n(1,a),n(0,r)},function(e){a[e]=this.checked,n(1,a),n(0,r)}]}class Li extends Me{constructor(e){super(),Se(this,e,Fi,Ui,c,{bot:0},Gi)}}!function(e,t){if(!e.setImmediate){var n,r,a,o,i,s=1,l={},c=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),n=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return l[s]=a,n(s),s++},d.clearImmediate=f}function f(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),c=!1}}}}}("undefined"==typeof self?Nn:self);class Ji{constructor({enumerate:e,seed:t}){this.enumerateFn=e,this.seed=t,this.iterationCounter=0,this._opts={}}addOpt({key:e,range:t,initial:n}){this._opts[e]={range:t,value:n}}getOpt(e){return this._opts[e].value}setOpt(e,t){e in this._opts&&(this._opts[e].value=t)}opts(){return this._opts}enumerate(e,t,n){return this.enumerateFn(e,t,n).map(e=>"payload"in e?e:"move"in e?Be(e.move,e.args,n):"event"in e?Ue(e.event,e.args,n):void 0)}random(e){let t;if(void 0!==this.seed){const e=Yt(this.prngstate?"":this.seed,this.prngstate);t=e(),this.prngstate=e.state()}else t=Math.random();if(e){if(Array.isArray(e)){return e[Math.floor(t*e.length)]}return Math.floor(t*e)}return t}}class Ki extends Ji{constructor({enumerate:e,seed:t,objectives:n,game:r,iterations:a,playoutDepth:o,iterationCallback:i}){super({enumerate:e,seed:t}),void 0===n&&(n=()=>({})),this.objectives=n,this.iterationCallback=i||(()=>{}),this.reducer=Zn({game:r}),this.iterations=a,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:"number"==typeof a?a:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:"number"==typeof o?o:50,range:{min:1,max:100}})}createNode({state:e,parentAction:t,parent:n,playerID:r}){const{G:a,ctx:o}=e;let i=[],s=[];if(void 0!==r)i=this.enumerate(a,o,r),s=this.objectives(a,o,r);else if(o.activePlayers)for(const e in o.activePlayers)i.push(...this.enumerate(a,o,e)),s.push(this.objectives(a,o,e));else i=this.enumerate(a,o,o.currentPlayer),s=this.objectives(a,o,o.currentPlayer);return{state:e,parent:n,parentAction:t,actions:i,objectives:s,children:[],visits:0,value:0}}select(e){if(e.actions.length>0)return e;if(0===e.children.length)return e;let t=null,n=0;for(const r of e.children){const a=r.visits+Number.EPSILON,o=r.value/a+Math.sqrt(2*Math.log(e.visits)/a);(null==t||o>n)&&(n=o,t=r)}return this.select(t)}expand(e){const t=e.actions;if(0===t.length||void 0!==e.state.ctx.gameover)return e;const n=this.random(t.length),r=t[n];e.actions.splice(n,1);const a=this.reducer(e.state,r),o=this.createNode({state:a,parentAction:r,parent:e});return e.children.push(o),o}playout({state:e}){let t=this.getOpt("playoutDepth");"function"==typeof this.playoutDepth&&(t=this.playoutDepth(e.G,e.ctx));for(let n=0;n<t&&void 0===e.ctx.gameover;n++){const{G:t,ctx:n}=e;let r=n.currentPlayer;n.activePlayers&&(r=Object.keys(n.activePlayers)[0]);const a=this.enumerate(t,n,r),o=this.objectives(t,n,r),i=Object.keys(o).reduce((e,r)=>{const a=o[r];return a.checker(t,n)?e+a.weight:e},0);if(i>0)return{score:i};if(!a||0===a.length)return;const s=this.random(a.length);e=this.reducer(e,a[s])}return e.ctx.gameover}backpropagate(e,t={}){e.visits++,void 0!==t.score&&(e.value+=t.score),!0===t.draw&&(e.value+=.5),e.parentAction&&t.winner===e.parentAction.payload.playerID&&e.value++,e.parent&&this.backpropagate(e.parent,t)}play(e,t){const n=this.createNode({state:e,playerID:t});let r=this.getOpt("iterations");"function"==typeof this.iterations&&(r=this.iterations(e.G,e.ctx));const a=()=>{let e=null;for(const t of n.children)(null==e||t.visits>e.visits)&&(e=t);return{action:e&&e.parentAction,metadata:n}};return new Promise(e=>{const t=()=>{for(let e=0;e<25&&this.iterationCounter<r;e++){const e=this.select(n),t=this.expand(e),r=this.playout(t);this.backpropagate(t,r),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:r,metadata:n})};if(this.iterationCounter=0,this.getOpt("async")){const n=()=>{this.iterationCounter<r?(t(),setImmediate(n)):e(a())};n()}else{for(;this.iterationCounter<r;)t();e(a())}})}}class Hi extends Ji{play({G:e,ctx:t},n){const r=this.enumerate(e,t,n);return Promise.resolve({action:this.random(r)})}}async function Wi(e,t){const n=e.store.getState();let r=n.ctx.currentPlayer;n.ctx.activePlayers&&(r=Object.keys(n.ctx.activePlayers)[0]);const{action:a,metadata:o}=await t.play(n,r);if(a){const t={...a,payload:{...a.payload,metadata:o}};return e.store.dispatch(t),t}}function Zi(e){P(e,"svelte-lifdi8","ul.svelte-lifdi8{padding-left:0}li.svelte-lifdi8{list-style:none;margin:none;margin-bottom:5px}h3.svelte-lifdi8{text-transform:uppercase}label.svelte-lifdi8{color:#666}input[type='checkbox'].svelte-lifdi8{vertical-align:middle}")}function Yi(e,t,n){const r=e.slice();return r[7]=t[n],r}function Xi(e){let t,r,a;return{c(){t=I("p"),t.textContent="No bots available.",r=M(),a=I("p"),a.innerHTML='Follow the instructions\n        <a href="https://boardgame.io/documentation/#/tutorial?id=bots" target="_blank">here</a>\n        to set up bots.'},m(e,n){E(e,t,n),E(e,r,n),E(e,a,n)},p:n,i:n,o:n,d(e){e&&O(t),e&&O(r),e&&O(a)}}}function Qi(e){let t;return{c(){t=I("p"),t.textContent="The bot debugger is only available in singleplayer mode."},m(e,n){E(e,t,n)},p:n,i:n,o:n,d(e){e&&O(t)}}}function es(e){let t,n,r,a,o,i,l,c,u,d,f,p,v,g,h,m,y,b,$,P,w,k,A,S=Object.keys(e[7].opts()).length;i=new qa({props:{value:"1",onPress:e[13],label:"reset"}}),u=new qa({props:{value:"2",onPress:e[11],label:"play"}}),p=new qa({props:{value:"3",onPress:e[12],label:"simulate"}});let N=Object.keys(e[8]),C=[];for(let t=0;t<N.length;t+=1)C[t]=ts(Yi(e,N,t));let z=S&&ns(e),q=(e[5]||e[3])&&rs(e);return{c(){t=I("section"),n=I("h3"),n.textContent="Controls",r=M(),a=I("ul"),o=I("li"),Oe(i.$$.fragment),l=M(),c=I("li"),Oe(u.$$.fragment),d=M(),f=I("li"),Oe(p.$$.fragment),v=M(),g=I("section"),h=I("h3"),h.textContent="Bot",m=M(),y=I("select");for(let e=0;e<C.length;e+=1)C[e].c();b=M(),z&&z.c(),$=M(),q&&q.c(),P=D(),T(n,"class","svelte-lifdi8"),T(o,"class","svelte-lifdi8"),T(c,"class","svelte-lifdi8"),T(f,"class","svelte-lifdi8"),T(a,"class","svelte-lifdi8"),T(h,"class","svelte-lifdi8"),void 0===e[4]&&ie(()=>e[17].call(y))},m(s,O){E(s,t,O),x(t,n),x(t,r),x(t,a),x(a,o),_e(i,o,null),x(a,l),x(a,c),_e(u,c,null),x(a,d),x(a,f),_e(p,f,null),E(s,v,O),E(s,g,O),x(g,h),x(g,m),x(g,y);for(let e=0;e<C.length;e+=1)C[e].m(y,null);G(y,e[4]),E(s,b,O),z&&z.m(s,O),E(s,$,O),q&&q.m(s,O),E(s,P,O),w=!0,k||(A=[j(y,"change",e[17]),j(y,"change",e[10])],k=!0)},p(e,t){if(256&t){let n;for(N=Object.keys(e[8]),n=0;n<N.length;n+=1){const r=Yi(e,N,n);C[n]?C[n].p(r,t):(C[n]=ts(r),C[n].c(),C[n].m(y,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=N.length}272&t&&G(y,e[4]),128&t&&(S=Object.keys(e[7].opts()).length),S?z?(z.p(e,t),128&t&&ye(z,1)):(z=ns(e),z.c(),ye(z,1),z.m($.parentNode,$)):z&&(he(),be(z,1,1,()=>{z=null}),me()),e[5]||e[3]?q?q.p(e,t):(q=rs(e),q.c(),q.m(P.parentNode,P)):q&&(q.d(1),q=null)},i(e){w||(ye(i.$$.fragment,e),ye(u.$$.fragment,e),ye(p.$$.fragment,e),ye(z),w=!0)},o(e){be(i.$$.fragment,e),be(u.$$.fragment,e),be(p.$$.fragment,e),be(z),w=!1},d(e){e&&O(t),Ie(i),Ie(u),Ie(p),e&&O(v),e&&O(g),_(C,e),e&&O(b),z&&z.d(e),e&&O($),q&&q.d(e),e&&O(P),k=!1,s(A)}}}function ts(e){let t,r,a,o=e[7]+"";return{c(){t=I("option"),r=S(o),t.__value=a=e[7],t.value=t.__value},m(e,n){E(e,t,n),x(t,r)},p:n,d(e){e&&O(t)}}}function ns(e){let t,n,r,a,o,i,l,c,u,d,f;return c=new Li({props:{bot:e[7]}}),{c(){t=I("section"),n=I("h3"),n.textContent="Options",r=M(),a=I("label"),a.textContent="debug",o=M(),i=I("input"),l=M(),Oe(c.$$.fragment),T(n,"class","svelte-lifdi8"),T(a,"for","ai-option-debug"),T(a,"class","svelte-lifdi8"),T(i,"id","ai-option-debug"),T(i,"type","checkbox"),T(i,"class","svelte-lifdi8")},m(s,p){E(s,t,p),x(t,n),x(t,r),x(t,a),x(t,o),x(t,i),i.checked=e[1],x(t,l),_e(c,t,null),u=!0,d||(f=[j(i,"change",e[18]),j(i,"change",e[9])],d=!0)},p(e,t){2&t&&(i.checked=e[1]);const n={};128&t&&(n.bot=e[7]),c.$set(n)},i(e){u||(ye(c.$$.fragment,e),u=!0)},o(e){be(c.$$.fragment,e),u=!1},d(e){e&&O(t),Ie(c),d=!1,s(f)}}}function rs(e){let t,n,r,a,o=e[2]&&e[2]<1&&as(e),i=e[5]&&os(e);return{c(){t=I("section"),n=I("h3"),n.textContent="Result",r=M(),o&&o.c(),a=M(),i&&i.c(),T(n,"class","svelte-lifdi8")},m(e,s){E(e,t,s),x(t,n),x(t,r),o&&o.m(t,null),x(t,a),i&&i.m(t,null)},p(e,n){e[2]&&e[2]<1?o?o.p(e,n):(o=as(e),o.c(),o.m(t,a)):o&&(o.d(1),o=null),e[5]?i?i.p(e,n):(i=os(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&O(t),o&&o.d(),i&&i.d()}}}function as(e){let t;return{c(){t=I("progress"),t.value=e[2]},m(e,n){E(e,t,n)},p(e,n){4&n&&(t.value=e[2])},d(e){e&&O(t)}}}function os(e){let t,n,r,a,o,i,s,l,c=JSON.stringify(e[6])+"";return{c(){t=I("ul"),n=I("li"),r=S("Action: "),a=S(e[5]),o=M(),i=I("li"),s=S("Args: "),l=S(c),T(n,"class","svelte-lifdi8"),T(i,"class","svelte-lifdi8"),T(t,"class","svelte-lifdi8")},m(e,c){E(e,t,c),x(t,n),x(n,r),x(n,a),x(t,o),x(t,i),x(i,s),x(i,l)},p(e,t){32&t&&C(a,e[5]),64&t&&c!==(c=JSON.stringify(e[6])+"")&&C(l,c)},d(e){e&&O(t)}}}function is(e){let t,n,r,a,o,i;const s=[es,Qi,Xi],l=[];function c(e,t){return e[0].game.ai&&!e[0].multiplayer?0:e[0].multiplayer?1:2}return n=c(e),r=l[n]=s[n](e),{c(){t=I("section"),r.c()},m(r,s){E(r,t,s),l[n].m(t,null),a=!0,o||(i=j(window,"keydown",e[14]),o=!0)},p(e,[a]){let o=n;n=c(e),n===o?l[n].p(e,a):(he(),be(l[o],1,1,()=>{l[o]=null}),me(),r=l[n],r?r.p(e,a):(r=l[n]=s[n](e),r.c()),ye(r,1),r.m(t,null))},i(e){a||(ye(r),a=!0)},o(e){be(r),a=!1},d(e){e&&O(t),l[n].d(),o=!1,i()}}}function ss(e,t,n){let{client:r}=t,{clientManager:a}=t,{ToggleVisibility:o}=t;const{secondaryPane:i}=X("secondaryPane"),s={MCTS:Ki,Random:Hi};let l=!1,c=null,u=0,d=null;const f=({iterationCounter:e,numIterations:t,metadata:r})=>{n(3,u=e),n(2,c=e/t),d=r,l&&d&&i.set({component:Ei,metadata:d})};let p,v,g,h;function m(){r.overrideGameState(null),i.set(null),n(1,l=!1)}return r.game.ai&&(p=new Ki({game:r.game,enumerate:r.game.ai.enumerate,iterationCallback:f}),p.setOpt("async",!0)),W(m),e.$$set=e=>{"client"in e&&n(0,r=e.client),"clientManager"in e&&n(15,a=e.clientManager),"ToggleVisibility"in e&&n(16,o=e.ToggleVisibility)},[r,l,c,u,v,g,h,p,s,function(){l&&d?i.set({component:Ei,metadata:d}):i.set(null)},function(){n(7,p=new(0,s[v])({game:r.game,enumerate:r.game.ai.enumerate,iterationCallback:f})),p.setOpt("async",!0),n(5,g=null),d=null,i.set(null),n(3,u=0)},async function(){n(5,g=null),d=null,n(3,u=0);const e=await Wi(r,p);e&&(n(5,g=e.payload.type),n(6,h=e.payload.args))},function(e=1e4,t=100){return n(5,g=null),d=null,n(3,u=0),(async()=>{for(let n=0;n<e;n++){if(!await Wi(r,p))break;await new Promise(e=>setTimeout(e,t))}})()},function(){r.reset(),n(5,g=null),d=null,n(3,u=0),m()},function(e){27==e.keyCode&&m()},a,o,function(){v=q(this),n(4,v),n(8,s)},function(){l=this.checked,n(1,l)}]}class ls extends Me{constructor(e){super(),Se(this,e,ss,is,c,{client:0,clientManager:15,ToggleVisibility:16},Zi)}}function cs(e){P(e,"svelte-8ymctk",".debug-panel.svelte-8ymctk.svelte-8ymctk{position:fixed;color:#555;font-family:monospace;right:0;top:0;height:100%;font-size:14px;opacity:0.9;z-index:99999}.panel.svelte-8ymctk.svelte-8ymctk{display:flex;position:relative;flex-direction:row;height:100%}.visibility-toggle.svelte-8ymctk.svelte-8ymctk{position:absolute;box-sizing:border-box;top:7px;border:1px solid #ccc;border-radius:5px;width:48px;height:48px;padding:8px;background:white;color:#555;box-shadow:0 0 5px rgba(0, 0, 0, 0.2)}.visibility-toggle.svelte-8ymctk.svelte-8ymctk:hover,.visibility-toggle.svelte-8ymctk.svelte-8ymctk:focus{background:#eee}.opener.svelte-8ymctk.svelte-8ymctk{right:10px}.closer.svelte-8ymctk.svelte-8ymctk{left:-326px}@keyframes svelte-8ymctk-rotateFromZero{from{transform:rotateZ(0deg)}to{transform:rotateZ(180deg)}}.icon.svelte-8ymctk.svelte-8ymctk{display:flex;height:100%;animation:svelte-8ymctk-rotateFromZero 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0s 1\n      normal forwards}.closer.svelte-8ymctk .icon.svelte-8ymctk{animation-direction:reverse}.pane.svelte-8ymctk.svelte-8ymctk{flex-grow:2;overflow-x:hidden;overflow-y:scroll;background:#fefefe;padding:20px;border-left:1px solid #ccc;box-shadow:-1px 0 5px rgba(0, 0, 0, 0.2);box-sizing:border-box;width:280px}.secondary-pane.svelte-8ymctk.svelte-8ymctk{background:#fefefe;overflow-y:scroll}.debug-panel.svelte-8ymctk button,.debug-panel.svelte-8ymctk select{cursor:pointer;font-size:14px;font-family:monospace}.debug-panel.svelte-8ymctk select{background:#eee;border:1px solid #bbb;color:#555;padding:3px;border-radius:3px}.debug-panel.svelte-8ymctk section{margin-bottom:20px}.debug-panel.svelte-8ymctk .screen-reader-only{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}")}function us(e){let t,r,a,o,i,s,l,c,u,d=e[10]&&function(e){let t,r,a,o,i,s,l,c;return a=new pr({}),{c(){t=I("button"),r=I("span"),Oe(a.$$.fragment),T(r,"class","icon svelte-8ymctk"),T(r,"aria-hidden","true"),T(t,"class","visibility-toggle closer svelte-8ymctk"),T(t,"title","Hide Debug Panel")},m(n,o){E(n,t,o),x(t,r),_e(a,r,null),s=!0,l||(c=j(t,"click",e[9]),l=!0)},p:n,i(n){s||(ye(a.$$.fragment,n),ie(()=>{i&&i.end(1),o=xe(t,e[14],{key:"toggle"}),o.start()}),s=!0)},o(n){be(a.$$.fragment,n),o&&o.invalidate(),i=Pe(t,e[13],{key:"toggle"}),s=!1},d(e){e&&O(t),Ie(a),e&&i&&i.end(),l=!1,c()}}}(e);a=new br({props:{panes:e[6],pane:e[2]}}),a.$on("change",e[8]);var f=e[6][e[2]].component;function p(e){return{props:{client:e[4],clientManager:e[0],ToggleVisibility:e[9]}}}f&&(s=new f(p(e)));let v=e[5]&&fs(e);return{c(){t=I("div"),d&&d.c(),r=M(),Oe(a.$$.fragment),o=M(),i=I("div"),s&&Oe(s.$$.fragment),l=M(),v&&v.c(),T(i,"class","pane svelte-8ymctk"),T(i,"role","region"),T(i,"aria-label",e[2]),T(i,"tabindex","-1"),T(t,"class","panel svelte-8ymctk")},m(n,c){E(n,t,c),d&&d.m(t,null),x(t,r),_e(a,t,null),x(t,o),x(t,i),s&&_e(s,i,null),e[16](i),x(t,l),v&&v.m(t,null),u=!0},p(n,r){(e=n)[10]&&d.p(e,r);const o={};4&r&&(o.pane=e[2]),a.$set(o);const l={};if(16&r&&(l.client=e[4]),1&r&&(l.clientManager=e[0]),f!==(f=e[6][e[2]].component)){if(s){he();const e=s;be(e.$$.fragment,1,0,()=>{Ie(e,1)}),me()}f?(s=new f(p(e)),Oe(s.$$.fragment),ye(s.$$.fragment,1),_e(s,i,null)):s=null}else f&&s.$set(l);(!u||4&r)&&T(i,"aria-label",e[2]),e[5]?v?(v.p(e,r),32&r&&ye(v,1)):(v=fs(e),v.c(),ye(v,1),v.m(t,null)):v&&(he(),be(v,1,1,()=>{v=null}),me())},i(n){u||(ye(d),ye(a.$$.fragment,n),s&&ye(s.$$.fragment,n),ye(v),ie(()=>{c||(c=we(t,rr,{x:400,...e[12]},!0)),c.run(1)}),u=!0)},o(n){be(d),be(a.$$.fragment,n),s&&be(s.$$.fragment,n),be(v),c||(c=we(t,rr,{x:400,...e[12]},!1)),c.run(0),u=!1},d(n){n&&O(t),d&&d.d(),Ie(a),s&&Ie(s),e[16](null),v&&v.d(),n&&c&&c.end()}}}function ds(e){let t,r,a=e[10]&&function(e){let t,r,a,o,i,s,l,c;return a=new pr({}),{c(){t=I("button"),r=I("span"),Oe(a.$$.fragment),T(r,"class","icon svelte-8ymctk"),T(r,"aria-hidden","true"),T(t,"class","visibility-toggle opener svelte-8ymctk"),T(t,"title","Show Debug Panel")},m(n,o){E(n,t,o),x(t,r),_e(a,r,null),s=!0,l||(c=j(t,"click",e[9]),l=!0)},p:n,i(n){s||(ye(a.$$.fragment,n),ie(()=>{i&&i.end(1),o=xe(t,e[14],{key:"toggle"}),o.start()}),s=!0)},o(n){be(a.$$.fragment,n),o&&o.invalidate(),i=Pe(t,e[13],{key:"toggle"}),s=!1},d(e){e&&O(t),Ie(a),e&&i&&i.end(),l=!1,c()}}}(e);return{c(){a&&a.c(),t=D()},m(e,n){a&&a.m(e,n),E(e,t,n),r=!0},p(e,t){e[10]&&a.p(e,t)},i(e){r||(ye(a),r=!0)},o(e){be(a),r=!1},d(e){a&&a.d(e),e&&O(t)}}}function fs(e){let t,n,r;var a=e[5].component;function o(e){return{props:{metadata:e[5].metadata}}}return a&&(n=new a(o(e))),{c(){t=I("div"),n&&Oe(n.$$.fragment),T(t,"class","secondary-pane svelte-8ymctk")},m(e,a){E(e,t,a),n&&_e(n,t,null),r=!0},p(e,r){const i={};if(32&r&&(i.metadata=e[5].metadata),a!==(a=e[5].component)){if(n){he();const e=n;be(e.$$.fragment,1,0,()=>{Ie(e,1)}),me()}a?(n=new a(o(e)),Oe(n.$$.fragment),ye(n.$$.fragment,1),_e(n,t,null)):n=null}else a&&n.$set(i)},i(e){r||(n&&ye(n.$$.fragment,e),r=!0)},o(e){n&&be(n.$$.fragment,e),r=!1},d(e){e&&O(t),n&&Ie(n)}}}function ps(e){let t,n,r,a,o,i;const s=[ds,us],l=[];function c(e,t){return e[3]?1:0}return n=c(e),r=l[n]=s[n](e),{c(){t=I("section"),r.c(),T(t,"aria-label","boardgame.io Debug Panel"),T(t,"class","debug-panel svelte-8ymctk")},m(r,s){E(r,t,s),l[n].m(t,null),a=!0,o||(i=j(window,"keypress",e[11]),o=!0)},p(e,[a]){let o=n;n=c(e),n===o?l[n].p(e,a):(he(),be(l[o],1,1,()=>{l[o]=null}),me(),r=l[n],r?r.p(e,a):(r=l[n]=s[n](e),r.c()),ye(r,1),r.m(t,null))},i(e){a||(ye(r),a=!0)},o(e){be(r),a=!1},d(e){e&&O(t),l[n].d(),o=!1,i()}}}function vs(e,t,r){let a,o,i,s=n,l=()=>(s(),s=u(c,e=>r(15,o=e)),c);e.$$.on_destroy.push(()=>s());let{clientManager:c}=t;l();const f={main:{label:"Main",shortcut:"m",component:So},log:{label:"Log",shortcut:"l",component:zi},info:{label:"Info",shortcut:"i",component:qo},ai:{label:"AI",shortcut:"a",component:ls}},p=tr(!1),v=tr(null);let g;d(e,v,e=>r(5,i=e)),Y("hotkeys",{disableHotkeys:p}),Y("secondaryPane",{secondaryPane:v});let h="main";function m(){r(3,b=!b)}const y=o.client.debugOpt;let b=!y||!y.collapseOnLoad;const $=!y||!y.hideToggleButton;const x={duration:150,easing:nr},[P,w]=ar(x);return e.$$set=e=>{"clientManager"in e&&l(r(0,c=e.clientManager))},e.$$.update=()=>{32768&e.$$.dirty&&r(4,a=o.client)},[c,g,h,b,a,i,f,v,function(e){r(2,h=e.detail),g.focus()},m,$,function(e){"."!=e.key?b&&Object.entries(f).forEach(([t,{shortcut:n}])=>{e.key==n&&r(2,h=t)}):m()},x,P,w,o,function(e){te[e?"unshift":"push"](()=>{g=e,r(1,g)})}]}class gs extends Me{constructor(e){super(),Se(this,e,vs,ps,c,{clientManager:0},cs)}}const hs=new class{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(e){this.clients.set(e,e),this.mountDebug(e),this.notifySubscribers()}unregister(e){if(this.clients.delete(e),this.currentClient===e){this.unmountDebug();for(const[e]of this.clients){if(this.debugPanel)break;this.mountDebug(e)}}this.notifySubscribers()}subscribe(e){const t=Symbol();return this.subscribers.set(t,e),e(this.getState()),()=>{this.subscribers.delete(t)}}switchPlayerID(e){if(this.currentClient.multiplayer)for(const[t]of this.clients)if(t.playerID===e&&!1!==t.debugOpt&&t.multiplayer===this.currentClient.multiplayer)return void this.switchToClient(t);this.currentClient.updatePlayerID(e),this.notifySubscribers()}switchToClient(e){e!==this.currentClient&&(this.unmountDebug(),this.mountDebug(e),this.notifySubscribers())}notifySubscribers(){const e=this.getState();this.subscribers.forEach(t=>{t(e)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(e=>!1!==e.debugOpt)}mountDebug(e){if(!1===e.debugOpt||null!==this.debugPanel||"undefined"==typeof document)return;let t,n=document.body;t=gs,e.debugOpt&&!0!==e.debugOpt&&(t=e.debugOpt.impl||t,n=e.debugOpt.target||n),t&&(this.currentClient=e,this.debugPanel=new t({target:n,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}};function ms(e,t,n){if(!n&&null==e){e=t.getState().ctx.currentPlayer}return e}function ys(e,t,n,r,a,o){const i={};for(const s of t)i[s]=(...t)=>{const i=Xe[e](s,t,ms(r,n,o),a);n.dispatch(i)};return i}const bs=ys.bind(null,"makeMove"),$s=ys.bind(null,"gameEvent"),xs=ys.bind(null,"plugin");class Ps{constructor({game:e,debug:n,numPlayers:r,multiplayer:a,matchID:o,playerID:i,credentials:s,enhancer:l}){this.game=Mn(e),this.playerID=i,this.matchID=o||"default",this.credentials=s,this.multiplayer=a,this.debugOpt=n,this.manager=hs,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Zn({game:this.game,isClient:void 0!==a}),this.initialState=null,a||(this.initialState=Yn({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(He(this.initialState))},this.undo=()=>{const e=We(ms(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.redo=()=>{const e=Ze(ms(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.log=[];const c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Te(15))},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(a)}));return r=Re.apply(void 0,o)(n.dispatch),Ne(Ne({},n),{},{dispatch:r})}}}(Wn,()=>e=>t=>{const n=e(t);return this.notifySubscribers(),n},e=>t=>n=>{const r=e.getState(),a=t(n);return"clientOnly"in n||"STRIP_TRANSIENTS"===n.type||this.transport.sendAction(r,n),a},e=>t=>n=>{const r=t(n),a=e.getState();switch(n.type){case"MAKE_MOVE":case"GAME_EVENT":case"UNDO":case"REDO":{const e=a.deltalog;this.log=[...this.log,...e];break}case"RESET":this.log=[];break;case"PATCH":case"UPDATE":{let e=-1;this.log.length>0&&(e=this.log[this.log.length-1]._stateID);let t=n.deltalog||[];t=t.filter(t=>t._stateID>e),this.log=[...this.log,...t];break}case"SYNC":this.initialState=n.initialState,this.log=n.log||[]}return r});l=void 0!==l?Re(c,l):c,this.store=Ve(this.reducer,this.initialState,l),a||(a=Qn),this.transport=a({transportDataCallback:e=>this.receiveTransportData(e),gameKey:e,game:this.game,matchID:o,playerID:i,credentials:s,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=e=>{this.transport.sendChatMessage(this.matchID,{id:t(7),sender:this.playerID,payload:e})}}receiveMatchData(e){this.matchData=e,this.notifySubscribers()}receiveChatMessage(e){this.chatMessages=[...this.chatMessages,e],this.notifySubscribers()}receiveTransportData(e){const[t]=e.args;if(t===this.matchID)switch(e.type){case"sync":{const[,t]=e.args,n=Le(t);this.receiveMatchData(t.filteredMetadata),this.store.dispatch(n);break}case"update":{const[,t,n]=e.args,r=this.store.getState();if(t._stateID>=r._stateID){const e=Ke(t,n);this.store.dispatch(e)}break}case"patch":{const[,t,n,r,a]=e.args,o=this.store.getState()._stateID;if(t!==o)break;const i=Je(t,n,r,a);this.store.dispatch(i),this.store.getState()._stateID===o&&this.transport.requestSync();break}case"matchData":{const[,t]=e.args;this.receiveMatchData(t);break}case"chat":{const[,t]=e.args;this.receiveChatMessage(t);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(e=>e(this.getState()))}overrideGameState(e){this.gameStateOverride=e,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(e){const t=Object.keys(this.subscribers).length;return this.subscribers[t]=e,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),!this._running&&this.multiplayer||e(this.getState()),()=>{delete this.subscribers[t]}}getInitialState(){return this.initialState}getState(){let e=this.store.getState();if(null!==this.gameStateOverride&&(e=this.gameStateOverride),null===e)return e;let t=!0;const n=this.game.flow.isPlayerActive(e.G,e.ctx,this.playerID);return this.multiplayer&&!n&&(t=!1),this.multiplayer||null===this.playerID||void 0===this.playerID||n||(t=!1),void 0!==e.ctx.gameover&&(t=!1),this.multiplayer||(e={...e,G:this.game.playerView(e.G,e.ctx,this.playerID),plugins:wn(e,this)}),{...e,log:this.log,isActive:t,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=bs(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=$s(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=xs(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(e){this.playerID=e,this.createDispatchers(),this.transport.updatePlayerID(e),this.notifySubscribers()}updateMatchID(e){this.matchID=e,this.createDispatchers(),this.transport.updateMatchID(e),this.notifySubscribers()}updateCredentials(e){this.credentials=e,this.createDispatchers(),this.transport.updateCredentials(e),this.notifySubscribers()}}const ws=(e,t)=>{if(!e||"string"!=typeof e)throw new Error(`Expected ${t} string, got "${e}".`)},ks=e=>ws(e,"game name"),Es=e=>ws(e,"match ID"),Os=(e,t)=>{if(!e)throw new Error(`Expected body, got “${e}”.`);for(const n in t){const r=t[n],a=Array.isArray(r)?r:[r],o=e[n];if(!a.includes(typeof o)){const e=a.join("|");throw new TypeError(`Expected body.${n} to be of type ${e}, got “${o}”.`)}}};class _s extends Error{constructor(e,t){super(e),this.details=t}}e.Client=function(e){return new Ps(e)},e.LobbyClient=class{constructor({server:e=""}={}){this.server=e.replace(/\/$/,"")}async request(e,t){const n=await fetch(this.server+e,t);if(!n.ok){let e;try{e=await n.clone().json()}catch{try{e=await n.text()}catch(t){e=t.message}}throw new _s("HTTP status "+n.status,e)}return n.json()}async post(e,t){let n={method:"post",body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}};return t.init&&(n={...n,...t.init,headers:{...n.headers,...t.init.headers}}),this.request(e,n)}async listGames(e){return this.request("/games",e)}async listMatches(e,t,n){ks(e);let r="";if(t){const e=[],{isGameover:n,updatedBefore:a,updatedAfter:o}=t;void 0!==n&&e.push("isGameover="+n),a&&e.push("updatedBefore="+a),o&&e.push("updatedAfter="+o),e.length>0&&(r="?"+e.join("&"))}return this.request(`/games/${e}${r}`,n)}async getMatch(e,t,n){return ks(e),Es(t),this.request(`/games/${e}/${t}`,n)}async createMatch(e,t,n){return ks(e),Os(t,{numPlayers:"number"}),this.post(`/games/${e}/create`,{body:t,init:n})}async joinMatch(e,t,n,r){return ks(e),Es(t),Os(n,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${e}/${t}/join`,{body:n,init:r})}async leaveMatch(e,t,n,r){ks(e),Es(t),Os(n,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/leave`,{body:n,init:r})}async updatePlayer(e,t,n,r){ks(e),Es(t),Os(n,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/update`,{body:n,init:r})}async playAgain(e,t,n,r){return ks(e),Es(t),Os(n,{playerID:"string",credentials:"string"}),this.post(`/games/${e}/${t}/playAgain`,{body:n,init:r})}},e.LobbyClientError=_s,Object.defineProperty(e,"__esModule",{value:!0})}));
